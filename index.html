<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeTracker Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .date-display {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
        }
        
        .tracking-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: calc(100vh - 200px);
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }
        
        .quote-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .quote-text {
            font-style: italic;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #555;
        }
        
        .quote-author {
            font-weight: bold;
            color: #667eea;
        }
        
        .consistency-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .consistency-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .consistency-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .consistency-item:last-child {
            border-bottom: none;
        }
        
        .consistency-status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
        }
        
        .status-good {
            background: #4CAF50;
        }
        
        .status-bad {
            background: #f44336;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .input-group {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .input-group:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .sleep-expanded, .training-expanded {
            grid-column: span 2;
        }
        
        .sleep-details, .training-checkboxes, .run-details, .bodyweight-details {
            margin-top: 15px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .sleep-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .sleep-score {
            text-align: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
            color: #667eea;
        }
        
        .hour-minute-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
        }
        
        .hour-minute-group input {
            text-align: center;
            padding: 8px;
        }
        
        .sleep-time-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .sleep-time-inputs > div {
            display: flex;
            flex-direction: column;
        }
        
        .sleep-time-inputs label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .sleep-breakdown {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .sleep-metric {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
        }
        
        .sleep-metric-label {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .sleep-metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
        }
        
        .sleep-stage-bar {
            height: 8px;
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
            background: #e0e0e0;
        }
        
        .sleep-stage-fill {
            height: 100%;
            border-radius: 4px;
        }
        
        .sleep-detail-item, .run-detail-item {
            display: flex;
            flex-direction: column;
        }
        
        .sleep-detail-item label, .run-detail-item label {
            font-size: 0.9rem;
            margin-bottom: 5px;
            color: #666;
        }
        
        .sleep-detail-item input, .run-detail-item input, .run-detail-item select {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
        }
        
        .run-detail-item select {
            cursor: pointer;
            background: white;
        }
        
        .training-checkboxes {
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .run-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #e0e0e0;
        }
        
        .pause-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 10px;
        }
        
        .pause-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .pause-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .pause-toggle:hover {
            background: #e9ecef;
        }
        
        .pause-toggle.active {
            background: #fff3cd;
            border: 2px solid #ffc107;
        }
        
        .pause-checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }
        
        .pause-label {
            flex-grow: 1;
            margin-left: 10px;
            font-weight: 600;
            color: #333;
        }
        
        .pause-days {
            font-size: 0.9rem;
            color: #666;
            background: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
        }
        
        .pause-note {
            font-size: 0.8rem;
            color: #666;
            text-align: center;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .reset-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 10px;
        }
        
        .reset-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .reset-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }
        
        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
        }
        
        .reset-confirm {
            display: none;
            margin-top: 10px;
            padding: 15px;
            background: #fff3cd;
            border-radius: 10px;
            border: 1px solid #ffc107;
        }
        
        .reset-confirm-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .reset-confirm-btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .reset-confirm-yes {
            background: #f44336;
            color: white;
        }
        
        .reset-confirm-yes:hover {
            background: #d32f2f;
        }
        
        .reset-confirm-no {
            background: #6c757d;
            color: white;
        }
        
        .reset-confirm-no:hover {
            background: #545b62;
        }
        
        .reset-note {
            font-size: 0.8rem;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }

        .points-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .points-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .points-title {
            font-size: 1.3rem;
            color: #333;
        }
        
        .points-total {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(255, 215, 0, 0.3);
        }
        
        .points-breakdown {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
        
        .points-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .points-item:last-child {
            border-bottom: none;
        }
        
        .points-activity {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .points-emoji {
            font-size: 1.2rem;
        }
        
        .points-value {
            font-weight: bold;
            color: #FF9800;
        }
        
        .points-multiplier {
            font-size: 0.8rem;
            color: #4CAF50;
            margin-left: 5px;
        }
        
        .points-negative {
            color: #f44336;
        }
        
        .points-today {
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #FFD700;
            font-weight: bold;
            color: #333;
        }
        
        .level-indicator {
            margin-top: 10px;
            text-align: center;
        }
        
        .level-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 5px 0;
        }
        
        .level-progress {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .level-text {
            font-size: 0.9rem;
            color: #666;
        }
        
        @media (max-width: 768px) {
            .sleep-expanded, .training-expanded {
                grid-column: span 1;
            }
            
            .sleep-details {
                grid-template-columns: 1fr;
            }
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .checkbox-group label {
            margin: 0;
            cursor: pointer;
        }
        
        .cold-shower-checked {
            background: linear-gradient(135deg, #4CAF50, #45a049) !important;
            color: white;
        }
        
        .lust-checked {
            background: linear-gradient(135deg, #f44336, #d32f2f) !important;
            color: white;
        }
        
        .nav-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .nav-btn.active {
            background: #764ba2;
        }
        
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            height: 480px; 
            position: relative;
        }
        
        .chart-title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.5rem;
            color: #333;
        }

        .chart-wrapper {
            position: absolute;
            top: 70px;
            bottom: 20px;
            left: 20px;
            right: 20px;
        }
        
        .period-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .period-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            border-radius: 20px;
            background: white;
            color: #667eea;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .period-btn.active {
            background: #667eea;
            color: white;
        }
        
        .save-btn {
            display: block;
            width: 200px;
            margin: 30px auto;
            padding: 15px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .training-details {
            margin-top: 10px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .training-details input {
            width: 100%;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
            margin-top: 5px;
        }
        
        .run-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        
        .run-detail-item {
            display: flex;
            flex-direction: column;
        }
        
        .run-detail-item label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .run-detail-item input,
        .run-detail-item select {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
        }
        
        .run-detail-item select {
            cursor: pointer;
            background: white;
        }
        
        .bodyweight-goals {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            margin-top: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .bodyweight-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .bodyweight-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .bodyweight-item {
            display: flex;
            flex-direction: column;
        }
        
        .bodyweight-item label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .bodyweight-item input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .bodyweight-goal-display {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        
        .bodyweight-goal {
            text-align: center;
            flex: 1;
        }
        
        .bodyweight-goal-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .bodyweight-goal-label {
            font-size: 0.8rem;
            color: #666;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .sidebar {
                position: static;
                max-height: none;
            }
        }
    </style>
    <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåü LifeTracker Pro</h1>
            <div class="date-display" id="currentDate"></div>
        </div>
        <div class="main-content">
            <div class="tracking-section">
                <div class="input-grid">
                    <div class="input-group"><label for="stretching">üßò Stretching Sessions</label> <input type="number" id="stretching" placeholder="Enter sessions"></div>
                    <div class="input-group"><label for="steps">üëü Steps Taken</label> <input type="number" id="steps" placeholder="Enter steps"></div>
                    <div class="input-group sleep-expanded">
                        <label for="sleepHours">üò¥ Sleep Time</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                            <div>
                                <label for="sleepHours" style="font-size: 0.9rem; color: #666;">Hours</label>
                                <input type="number" id="sleepHours" step="0.5" placeholder="Hours" min="0" max="24">
                            </div>
                            <div>
                                <label for="sleepMinutes" style="font-size: 0.9rem; color: #666;">Minutes</label>
                                <input type="number" id="sleepMinutes" placeholder="Minutes" min="0" max="59">
                            </div>
                        </div>
                        <div class="sleep-details">
                            <div class="sleep-detail-item">
                                <label for="sleepQuality">Quality (1-100)</label>
                                <input type="number" id="sleepQuality" min="1" max="100" placeholder="Rate 1-100">
                            </div>
                            
                            <div class="sleep-detail-item">
                                <label>REM Sleep</label>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                                    <input type="number" id="remHours" placeholder="H" min="0" max="24" style="text-align: center;">
                                    <input type="number" id="remMinutes" placeholder="M" min="0" max="59" style="text-align: center;">
                                </div>
                            </div>
                            
                            <div class="sleep-detail-item">
                                <label>Deep Sleep</label>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                                    <input type="number" id="deepHours" placeholder="H" min="0" max="24" style="text-align: center;">
                                    <input type="number" id="deepMinutes" placeholder="M" min="0" max="59" style="text-align: center;">
                                </div>
                            </div>
                            
                            <div class="sleep-detail-item">
                                <label>Light Sleep</label>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                                    <input type="number" id="lightHours" placeholder="H" min="0" max="24" style="text-align: center;">
                                    <input type="number" id="lightMinutes" placeholder="M" min="0" max="59" style="text-align: center;">
                                </div>
                            </div>
                            
                            <div class="checkbox-group" style="margin-top: 10px;">
                                <input type="checkbox" id="napped">
                                <label for="napped">Took a nap today</label>
                            </div>
                        </div>
                    </div>
                    <div class="input-group"><label for="water">üíß Water (Liters)</label> <input type="number" id="water" step="0.1" placeholder="Enter liters"></div>
                    <div class="input-group"><label for="screenTime">üì± Screen Time (Hours)</label> <input type="number" id="screenTime" step="0.5" placeholder="Enter hours"></div>
                    <div class="input-group"><label for="pages">üìö Pages Read</label> <input type="number" id="pages" placeholder="Enter pages"></div>
                    <div class="input-group training-expanded">
                        <label>üí™ Training Sessions</label>
                        
                        <div class="training-checkboxes">
                            <!-- Gym Session 1 -->
                            <div class="checkbox-group">
                                <input type="checkbox" id="hadGym">
                                <label for="hadGym">üèãÔ∏è Gym Session 1</label>
                            </div>
                            
                            <div id="gymDetails" class="training-details" style="display: none;">
                                <div style="margin-bottom: 10px;">
                                    <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: #666;">Workout Focus:</label>
                                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gymCore">
                                            <label for="gymCore" style="font-size: 0.9rem;">Core</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gymLegs">
                                            <label for="gymLegs" style="font-size: 0.9rem;">Legs</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gymUpper">
                                            <label for="gymUpper" style="font-size: 0.9rem;">Upper</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gymFull">
                                            <label for="gymFull" style="font-size: 0.9rem;">Full Body</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gymCardio">
                                            <label for="gymCardio" style="font-size: 0.9rem;">Cardio</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <div>
                                        <label for="gymDuration" style="font-size: 0.9rem; color: #666;">Duration (min)</label>
                                        <input type="number" id="gymDuration" placeholder="Minutes" min="0">
                                    </div>
                                    <div>
                                        <label for="gymIntensity" style="font-size: 0.9rem; color: #666;">Intensity (1-10)</label>
                                        <input type="number" id="gymIntensity" min="1" max="10" placeholder="1-10">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Gym Session 2 -->
                            <div class="checkbox-group" style="margin-top: 15px;">
                                <input type="checkbox" id="hadGym2">
                                <label for="hadGym2">üèãÔ∏è Gym Session 2</label>
                            </div>
                            
                            <div id="gymDetails2" class="training-details" style="display: none;">
                                <div style="margin-bottom: 10px;">
                                    <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: #666;">Workout Focus:</label>
                                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gym2Core">
                                            <label for="gym2Core" style="font-size: 0.9rem;">Core</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gym2Legs">
                                            <label for="gym2Legs" style="font-size: 0.9rem;">Legs</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gym2Upper">
                                            <label for="gym2Upper" style="font-size: 0.9rem;">Upper</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gym2Full">
                                            <label for="gym2Full" style="font-size: 0.9rem;">Full Body</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="gym2Cardio">
                                            <label for="gym2Cardio" style="font-size: 0.9rem;">Cardio</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <div>
                                        <label for="gym2Duration" style="font-size: 0.9rem; color: #666;">Duration (min)</label>
                                        <input type="number" id="gym2Duration" placeholder="Minutes" min="0">
                                    </div>
                                    <div>
                                        <label for="gym2Intensity" style="font-size: 0.9rem; color: #666;">Intensity (1-10)</label>
                                        <input type="number" id="gym2Intensity" min="1" max="10" placeholder="1-10">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Home Workout -->
                            <div class="checkbox-group" style="margin-top: 15px;">
                                <input type="checkbox" id="hadHome">
                                <label for="hadHome">üè† Home Workout</label>
                            </div>
                            
                            <div id="homeDetails" class="training-details" style="display: none;">
                                <div style="margin-bottom: 10px;">
                                    <label style="display: block; margin-bottom: 5px; font-size: 0.9rem; color: #666;">Workout Type:</label>
                                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="homeBodyweight">
                                            <label for="homeBodyweight" style="font-size: 0.9rem;">Bodyweight</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="homeYoga">
                                            <label for="homeYoga" style="font-size: 0.9rem;">Yoga/Stretch</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="homeHIIT">
                                            <label for="homeHIIT" style="font-size: 0.9rem;">HIIT</label>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 5px;">
                                            <input type="checkbox" id="homeOther">
                                            <label for="homeOther" style="font-size: 0.9rem;">Other</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <div>
                                        <label for="homeDuration" style="font-size: 0.9rem; color: #666;">Duration (min)</label>
                                        <input type="number" id="homeDuration" placeholder="Minutes" min="0">
                                    </div>
                                    <div>
                                        <label for="homeIntensity" style="font-size: 0.9rem; color: #666;">Intensity (1-10)</label>
                                        <input type="number" id="homeIntensity" min="1" max="10" placeholder="1-10">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Running Session 1 -->
                            <div class="checkbox-group" style="margin-top: 15px;">
                                <input type="checkbox" id="hadRun">
                                <label for="hadRun">üèÉ Running Session 1</label>
                            </div>
                            
                            <div id="runDetails" class="run-details" style="display: none;">
                                <div class="run-detail-item">
                                    <label for="runType">Run Type</label>
                                    <select id="runType">
                                        <option value="">Select type</option>
                                        <option value="interval">Interval Training</option>
                                        <option value="free">Free Run</option>
                                        <option value="race">Race</option>
                                        <option value="tempo">Tempo Run</option>
                                        <option value="long">Long Distance</option>
                                        <option value="recovery">Recovery Run</option>
                                        <option value="hill">Hill Training</option>
                                    </select>
                                </div>
                                <div class="run-detail-item">
                                    <label for="runDistance">Distance (km)</label>
                                    <input type="number" id="runDistance" step="0.1" placeholder="Enter distance">
                                </div>
                                <div class="run-detail-item">
                                    <label for="runDuration">Duration (min)</label>
                                    <input type="number" id="runDuration" placeholder="Minutes">
                                </div>
                                <div class="run-detail-item">
                                    <label for="runIntensity">Intensity (1-10)</label>
                                    <input type="number" id="runIntensity" min="1" max="10" placeholder="1-10">
                                </div>
                            </div>
                            
                            <!-- Running Session 2 -->
                            <div class="checkbox-group" style="margin-top: 15px;">
                                <input type="checkbox" id="hadRun2">
                                <label for="hadRun2">üèÉ Running Session 2</label>
                            </div>
                            
                            <div id="runDetails2" class="run-details" style="display: none;">
                                <div class="run-detail-item">
                                    <label for="runType2">Run Type</label>
                                    <select id="runType2">
                                        <option value="">Select type</option>
                                        <option value="interval">Interval Training</option>
                                        <option value="free">Free Run</option>
                                        <option value="race">Race</option>
                                        <option value="tempo">Tempo Run</option>
                                        <option value="long">Long Distance</option>
                                        <option value="recovery">Recovery Run</option>
                                        <option value="hill">Hill Training</option>
                                    </select>
                                </div>
                                <div class="run-detail-item">
                                    <label for="runDistance2">Distance (km)</label>
                                    <input type="number" id="runDistance2" step="0.1" placeholder="Enter distance">
                                </div>
                                <div class="run-detail-item">
                                    <label for="runDuration2">Duration (min)</label>
                                    <input type="number" id="runDuration2" placeholder="Minutes">
                                </div>
                                <div class="run-detail-item">
                                    <label for="runIntensity2">Intensity (1-10)</label>
                                    <input type="number" id="runIntensity2" min="1" max="10" placeholder="1-10">
                                </div>
                            </div>
                        </div>
                        
                        <!-- New: Push-up and Pull-up tracking -->
                        <div class="bodyweight-goals">
                            <div class="bodyweight-title">üèãÔ∏è Bodyweight Goals</div>
                            <div class="bodyweight-inputs">
                                <div class="bodyweight-item">
                                    <label for="pushUps">Push-ups Count</label>
                                    <input type="number" id="pushUps" placeholder="Enter push-ups count" min="0">
                                </div>
                                <div class="bodyweight-item">
                                    <label for="pullUps">Pull-ups Count</label>
                                    <input type="number" id="pullUps" placeholder="Enter pull-ups count" min="0">
                                </div>
                            </div>
                            <div class="bodyweight-goal-display">
                                <div class="bodyweight-goal">
                                    <div class="bodyweight-goal-value" id="pushUpsGoal">0/50</div>
                                    <div class="bodyweight-goal-label">Push-ups Goal</div>
                                </div>
                                <div class="bodyweight-goal">
                                    <div class="bodyweight-goal-value" id="pullUpsGoal">0/20</div>
                                    <div class="bodyweight-goal-label">Pull-ups Goal</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="input-group" id="coldShowerGroup"><label>üöø Cold Shower</label>
                        <div class="checkbox-group"><input type="checkbox" id="coldShower"> <label for="coldShower">Took cold shower today</label></div>
                    </div>
                    <div class="input-group" id="lustGroup"><label>üö´ Lust Control</label>
                        <div class="checkbox-group"><input type="checkbox" id="lust"> <label for="lust">Broke lust control (check if failed)</label></div>
                    </div>
                </div>
                <button class="save-btn" onclick="saveData()">üíæ Save Today's Data</button>
                <div class="nav-buttons">
                    <button class="nav-btn active" onclick="showChart('stretching')">üßò Stretching</button>
                    <button class="nav-btn" onclick="showChart('steps')">üëü Steps</button>
                    <button class="nav-btn" onclick="showChart('sleep')">üò¥ Sleep</button>
                    <button class="nav-btn" onclick="showChart('water')">üíß Water</button>
                    <button class="nav-btn" onclick="showChart('screenTime')">üì± Screen Time</button>
                    <button class="nav-btn" onclick="showChart('pages')">üìö Reading</button>
                    <button class="nav-btn" onclick="showChart('training')">üí™ Training</button>
                </div>
                <div class="chart-container">
                    <div class="period-selector">
                        <button class="period-btn active" onclick="changePeriod('daily')">Daily</button>
                        <button class="period-btn" onclick="changePeriod('weekly')">Weekly</button>
                        <button class="period-btn" onclick="changePeriod('monthly')">Monthly</button>
                    </div>
                    <div class="chart-title" id="chartTitle">Stretching Sessions - Last 7 Days</div>
                    <div class="chart-wrapper">
                        <canvas id="mainChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar (now in correct position) -->
            <div class="sidebar">
                <div class="points-card">
                    <div class="points-header">
                        <div class="points-title">üéÆ Points System</div>
                        <div class="points-total" id="totalPoints">0</div>
                    </div>
                    <div class="level-indicator">
                        <div class="level-text" id="levelText">Level 1 (0/100)</div>
                        <div class="level-bar">
                            <div class="level-progress" id="levelProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="points-today" id="todayPoints">Today: 0 points</div>
                    <div class="points-breakdown" id="pointsBreakdown">
                        <!-- Points breakdown will be added here by JavaScript -->
                    </div>
                </div>
                <div class="pause-section">
                    <div class="pause-title">‚è∏Ô∏è Pause Streaks</div>
                    <div class="pause-toggle" onclick="togglePause('steps')">
                        <input type="checkbox" class="pause-checkbox" id="pauseSteps">
                        <span class="pause-label">Steps Taken</span>
                        <span class="pause-days" id="pauseStepsDays">0 days</span>
                    </div>
                    <div class="pause-toggle" onclick="togglePause('training')">
                        <input type="checkbox" class="pause-checkbox" id="pauseTraining">
                        <span class="pause-label">Training Sessions</span>
                        <span class="pause-days" id="pauseTrainingDays">0 days</span>
                    </div>
                    <div class="pause-toggle" onclick="togglePause('coldShower')">
                        <input type="checkbox" class="pause-checkbox" id="pauseColdShower">
                        <span class="pause-label">Cold Showers</span>
                        <span class="pause-days" id="pauseColdShowerDays">0 days</span>
                    </div>
                    <div class="pause-note">Toggle on to freeze streak when sick/resting</div>
                    <div class="reset-section">
                        <div class="reset-title">‚ö†Ô∏è Reset All Data</div>
                        <button class="reset-btn" onclick="showResetConfirm()">üóëÔ∏è Hard Reset All Data</button>
                        <div class="reset-confirm" id="resetConfirm">
                            <div style="color: #856404; margin-bottom: 10px; font-weight: 600;">
                                ‚ö†Ô∏è Are you sure? This will delete ALL data permanently!
                            </div>
                            <div class="reset-confirm-buttons">
                                <button class="reset-confirm-btn reset-confirm-yes" onclick="hardReset()">Yes, Delete Everything</button>
                                <button class="reset-confirm-btn reset-confirm-no" onclick="hideResetConfirm()">Cancel</button>
                            </div>
                        </div>
                        <div class="reset-note">This will clear all input fields and delete all saved data</div>
                    </div>
                </div>
                <div class="quote-card">
                    <div class="quote-text" id="dailyQuote"></div>
                    <div class="quote-author" id="quoteAuthor"></div>
                </div>
                <div class="sleep-card">
                    <div class="consistency-title">üò¥ Sleep Analysis</div>
                    <div id="sleepAnalysis">
                        <div style="text-align: center; color: #888; padding: 20px;">Enter sleep data to see analysis</div>
                    </div>
                </div>
                <div class="consistency-card">
                    <div class="consistency-title">üéØ Today's Goals</div>
                    <div id="consistencyTracker"></div>
                </div>
                <div class="consistency-card">
                    <div class="consistency-title">üî• Consistency Streaks</div>
                    <div id="streakTracker"></div>
                </div>
                <div class="consistency-card">
                    <div class="consistency-title">üìä Total Statistics</div>
                    <div id="totalStats"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Motivational quotes
        const quotes = [
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
            { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
            { text: "It is during our darkest moments that we must focus to see the light.", author: "Aristotle" },
            { text: "The only impossible journey is the one you never begin.", author: "Tony Robbins" },
            { text: "In the middle of difficulty lies opportunity.", author: "Albert Einstein" },
            { text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
            { text: "The way to get started is to quit talking and begin doing.", author: "Walt Disney" },
            { text: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
            { text: "A year from now you may wish you had started today.", author: "Karen Lamb" }
        ];
        
        // Goals for consistency tracking
        const goals = {
            steps: 10000,
            water: 2,
            pages: 20,
            stretching: 2,
            sleep: 8,
            screenTime: 2,
            training: 2,
            pushUps: 50,    // Daily push-up goal
            pullUps: 20     // Daily pull-up goal
        };
        
        // Pause/Freeze functionality storage
        let pausedStreaks = JSON.parse(localStorage.getItem('pausedStreaks')) || {
            steps: { paused: false, days: 0 },
            training: { paused: false, days: 0 },
            coldShower: { paused: false, days: 0 }
        };
        
        let currentChart = null;
        let currentView = 'stretching';
        let currentPeriod = 'daily';
        
        // Points System Configuration
        const pointsConfig = {
            stretching: 10,
            steps: 15,
            sleep: 20,
            water: 10,
            screenTime: 15,
            pages: 10,
            training: 25,
            coldShower: 20,
            lustControl: 30,
            sleepQuality: 10,       // Points for sleep quality above 80
            lustDeduction: -50,     // Points deduction for lust (negative value)
            pushUps: 15,
            pullUps: 15,
            stepsExceed: 0.005,
            sleepExceed: 5,
            waterExceed: 5,
            pagesExceed: 0.5,
            stretchingExceed: 3,
            bodyweightExceed: 1,    // Bonus per extra push-up/pull-up
            streakMultipliers: {
                3: 1.2,
                7: 1.5,
                14: 2.0,
                30: 3.0
            },
            dailyCompletionBonus: 50
        };
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            displayCurrentDate();
            displayDailyQuote();
            loadTodaysData();
            updateConsistencyTracker();
            updateStreakTracker();
            updateTotalStats();
            updatePointsDisplay();
            initializeChart();
            
            // Initialize pause system
            updatePauseDisplay();
            resetPauseCounters();
            
            // Training session toggle listeners
            document.getElementById('hadGym').addEventListener('change', function() {
                document.getElementById('gymDetails').style.display = this.checked ? 'block' : 'none';
                updateConsistencyTracker();
                updatePointsDisplay();
            });
            
            document.getElementById('hadGym2').addEventListener('change', function() {
                document.getElementById('gymDetails2').style.display = this.checked ? 'block' : 'none';
                updateConsistencyTracker();
                updatePointsDisplay();
            });
            
            document.getElementById('hadHome').addEventListener('change', function() {
                document.getElementById('homeDetails').style.display = this.checked ? 'block' : 'none';
                updateConsistencyTracker();
                updatePointsDisplay();
            });
            
            document.getElementById('hadRun').addEventListener('change', function() {
                document.getElementById('runDetails').style.display = this.checked ? 'grid' : 'none';
                if (!this.checked) {
                    document.getElementById('runType').value = '';
                    document.getElementById('runDistance').value = '';
                    document.getElementById('runDuration').value = '';
                    document.getElementById('runIntensity').value = '';
                }
                updateConsistencyTracker();
                updatePointsDisplay();
            });
            
            document.getElementById('hadRun2').addEventListener('change', function() {
                document.getElementById('runDetails2').style.display = this.checked ? 'grid' : 'none';
                if (!this.checked) {
                    document.getElementById('runType2').value = '';
                    document.getElementById('runDistance2').value = '';
                    document.getElementById('runDuration2').value = '';
                    document.getElementById('runIntensity2').value = '';
                }
                updateConsistencyTracker();
                updatePointsDisplay();
            });
            
            // Bodyweight inputs listeners
            document.getElementById('pushUps').addEventListener('input', function() {
                updateBodyweightGoals();
                updateConsistencyTracker();
                updatePointsDisplay();
            });
            
            document.getElementById('pullUps').addEventListener('input', function() {
                updateBodyweightGoals();
                updateConsistencyTracker();
                updatePointsDisplay();
            });
            
            // Training input listeners
            const trainingInputs = ['gymDuration', 'gymIntensity', 'gym2Duration', 'gym2Intensity', 
                                   'homeDuration', 'homeIntensity', 'runDistance', 'runDuration', 
                                   'runIntensity', 'runDistance2', 'runDuration2', 'runIntensity2',
                                   'runType', 'runType2'];
            
            trainingInputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', function() {
                        updateConsistencyTracker();
                        updatePointsDisplay();
                    });
                }
            });
            
            // Workout type checkboxes
            ['gymCore', 'gymLegs', 'gymUpper', 'gymFull', 'gymCardio',
             'gym2Core', 'gym2Legs', 'gym2Upper', 'gym2Full', 'gym2Cardio',
             'homeBodyweight', 'homeYoga', 'homeHIIT', 'homeOther'].forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('change', function() {
                        updatePointsDisplay();
                    });
                }
            });
            
            // General input listeners
            ['stretching', 'steps', 'sleepHours', 'water', 'screenTime', 'pages'].forEach(id => {
                document.getElementById(id).addEventListener('input', function() {
                    updateConsistencyTracker();
                    updatePointsDisplay();
                });
            });
            
            // Sleep input listeners
            ['sleepHours', 'sleepMinutes', 'sleepQuality', 'remHours', 'remMinutes', 
             'deepHours', 'deepMinutes', 'lightHours', 'lightMinutes'].forEach(id => {
                document.getElementById(id).addEventListener('input', function() {
                    updateSleepAnalysis();
                    updateConsistencyTracker();
                    updatePointsDisplay();
                });
            });
            
            // Checkbox listeners
            ['coldShower', 'lust', 'napped'].forEach(id => {
                document.getElementById(id).addEventListener('change', function() {
                    if (id === 'coldShower' || id === 'lust') updateCheckboxStyles();
                    if (id === 'napped') updateSleepAnalysis();
                    updateConsistencyTracker();
                    updatePointsDisplay();
                });
            });
            
            // Initialize displays
            updateSleepAnalysis();
            updateBodyweightGoals();
        });
        
        // ==================== BASIC FUNCTIONS ====================
        function displayCurrentDate() {
            const today = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('currentDate').textContent = today.toLocaleDateString('en-US', options);
            clearOldData();
        }
        
        function clearOldData() {
            const today = new Date().toISOString().split('T')[0];
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            
            if (allData[today]) return; // Don't clear if data exists for today
            
            // Clear inputs
            ['stretching', 'steps', 'sleepHours', 'sleepMinutes', 'water', 'screenTime', 'pages', 
             'sleepQuality', 'remHours', 'remMinutes', 'deepHours', 'deepMinutes', 
             'lightHours', 'lightMinutes', 'runDistance', 'runDistance2',
             'gymDuration', 'gymIntensity', 'gym2Duration', 'gym2Intensity',
             'homeDuration', 'homeIntensity', 'runDuration', 'runIntensity',
             'runDuration2', 'runIntensity2', 'pushUps', 'pullUps'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = '';
            });
            
            // Clear checkboxes
            ['hadGym', 'hadGym2', 'hadHome', 'hadRun', 'hadRun2', 'coldShower', 'lust', 'napped'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.checked = false;
            });
            
            // Clear workout type checkboxes
            ['gymCore', 'gymLegs', 'gymUpper', 'gymFull', 'gymCardio',
             'gym2Core', 'gym2Legs', 'gym2Upper', 'gym2Full', 'gym2Cardio',
             'homeBodyweight', 'homeYoga', 'homeHIIT', 'homeOther'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.checked = false;
            });
            
            // Clear selects
            ['runType', 'runType2'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = '';
            });
            
            // Hide details
            ['gymDetails', 'gymDetails2', 'homeDetails', 'runDetails', 'runDetails2'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.style.display = 'none';
            });
            
            updateCheckboxStyles();
            updateConsistencyTracker();
            updateSleepAnalysis();
            updateBodyweightGoals();
        }
        
        function displayDailyQuote() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
            const quoteIndex = dayOfYear % quotes.length;
            document.getElementById('dailyQuote').textContent = `"${quotes[quoteIndex].text}"`;
            document.getElementById('quoteAuthor').textContent = `‚Äî ${quotes[quoteIndex].author}`;
        }
        
        function updateCheckboxStyles() {
            const coldShowerGroup = document.getElementById('coldShowerGroup');
            const lustGroup = document.getElementById('lustGroup');
            const coldShowerChecked = document.getElementById('coldShower').checked;
            const lustChecked = document.getElementById('lust').checked;
            
            coldShowerGroup.classList.toggle('cold-shower-checked', coldShowerChecked);
            lustGroup.classList.toggle('lust-checked', lustChecked);
            updateConsistencyTracker();
        }
        
        function updateBodyweightGoals() {
            const pushUps = parseInt(document.getElementById('pushUps').value) || 0;
            const pullUps = parseInt(document.getElementById('pullUps').value) || 0;
            
            document.getElementById('pushUpsGoal').textContent = `${pushUps}/${goals.pushUps}`;
            document.getElementById('pullUpsGoal').textContent = `${pullUps}/${goals.pullUps}`;
        }
        
        // ==================== INPUT DATA FUNCTIONS ====================
        function getCurrentInputs() {
            // Sleep calculations
            const sleepHours = parseFloat(document.getElementById('sleepHours').value) || 0;
            const sleepMinutes = parseFloat(document.getElementById('sleepMinutes').value) || 0;
            const totalSleepHours = sleepHours + (sleepMinutes / 60);
            
            const remHours = parseFloat(document.getElementById('remHours').value) || 0;
            const remMinutes = parseFloat(document.getElementById('remMinutes').value) || 0;
            const totalRemMinutes = (remHours * 60) + remMinutes;
            
            const deepHours = parseFloat(document.getElementById('deepHours').value) || 0;
            const deepMinutes = parseFloat(document.getElementById('deepMinutes').value) || 0;
            const totalDeepMinutes = (deepHours * 60) + deepMinutes;
            
            const lightHours = parseFloat(document.getElementById('lightHours').value) || 0;
            const lightMinutes = parseFloat(document.getElementById('lightMinutes').value) || 0;
            const totalLightMinutes = (lightHours * 60) + lightMinutes;
            
            // Bodyweight goals
            const pushUps = parseInt(document.getElementById('pushUps').value) || 0;
            const pullUps = parseInt(document.getElementById('pullUps').value) || 0;
            
            // Helper function for workout types
            const getSelectedTypes = (prefix, types) => {
                const selected = [];
                types.forEach(type => {
                    const checkbox = document.getElementById(prefix + type);
                    if (checkbox && checkbox.checked) selected.push(type);
                });
                return selected;
            };
            
            return {
                // Basic inputs
                stretching: document.getElementById('stretching').value,
                steps: document.getElementById('steps').value,
                sleep: totalSleepHours.toFixed(2),
                sleepHours: sleepHours,
                sleepMinutes: sleepMinutes,
                sleepQuality: document.getElementById('sleepQuality').value,
                remSleep: totalRemMinutes,
                remHours: remHours,
                remMinutes: remMinutes,
                deepSleep: totalDeepMinutes,
                deepHours: deepHours,
                deepMinutes: deepMinutes,
                lightSleep: totalLightMinutes,
                lightHours: lightHours,
                lightMinutes: lightMinutes,
                napped: document.getElementById('napped').checked,
                water: document.getElementById('water').value,
                screenTime: document.getElementById('screenTime').value,
                pages: document.getElementById('pages').value,
                coldShower: document.getElementById('coldShower').checked,
                lust: document.getElementById('lust').checked,
                
                // Bodyweight goals
                pushUps: pushUps,
                pullUps: pullUps,
                
                // Training sessions
                hadGym: document.getElementById('hadGym').checked,
                hadGym2: document.getElementById('hadGym2').checked,
                hadHome: document.getElementById('hadHome').checked,
                hadRun: document.getElementById('hadRun').checked,
                hadRun2: document.getElementById('hadRun2').checked,
                
                // Gym 1
                gymTypes: getSelectedTypes('gym', ['Core', 'Legs', 'Upper', 'Full', 'Cardio']),
                gymDuration: document.getElementById('gymDuration').value,
                gymIntensity: document.getElementById('gymIntensity').value,
                
                // Gym 2
                gym2Types: getSelectedTypes('gym2', ['Core', 'Legs', 'Upper', 'Full', 'Cardio']),
                gym2Duration: document.getElementById('gym2Duration').value,
                gym2Intensity: document.getElementById('gym2Intensity').value,
                
                // Home
                homeTypes: getSelectedTypes('home', ['Bodyweight', 'Yoga', 'HIIT', 'Other']),
                homeDuration: document.getElementById('homeDuration').value,
                homeIntensity: document.getElementById('homeIntensity').value,
                
                // Run 1
                runType: document.getElementById('runType').value,
                runDistance: document.getElementById('runDistance').value,
                runDuration: document.getElementById('runDuration').value,
                runIntensity: document.getElementById('runIntensity').value,
                
                // Run 2
                runType2: document.getElementById('runType2').value,
                runDistance2: document.getElementById('runDistance2').value,
                runDuration2: document.getElementById('runDuration2').value,
                runIntensity2: document.getElementById('runIntensity2').value
            };
        }
        
        // ==================== CONSISTENCY TRACKER ====================
        function updateConsistencyTracker() {
            const tracker = document.getElementById('consistencyTracker');
            const currentData = getCurrentInputs();
            
            let html = '';
            
            // Regular metrics
            Object.keys(goals).forEach(key => {
                if (key === 'training') {
                    let trainingSessions = 0;
                    if (currentData.hadGym) trainingSessions++;
                    if (currentData.hadGym2) trainingSessions++;
                    if (currentData.hadHome) trainingSessions++;
                    if (currentData.hadRun) trainingSessions++;
                    if (currentData.hadRun2) trainingSessions++;
                    
                    const isGood = trainingSessions >= goals.training;
                    const status = isGood ? 'good' : 'bad';
                    const icon = isGood ? '‚úì' : '‚úó';
                    
                    html += `
                        <div class="consistency-item">
                            <span>Training (${trainingSessions}/${goals.training})</span>
                            <div class="consistency-status status-${status}">${icon}</div>
                        </div>
                    `;
                } else if (key === 'pushUps' || key === 'pullUps') {
                    const current = parseInt(currentData[key]) || 0;
                    const goal = goals[key];
                    const isGood = current >= goal;
                    const status = isGood ? 'good' : 'bad';
                    const icon = isGood ? '‚úì' : '‚úó';
                    
                    const displayName = key === 'pushUps' ? 'Push-ups' : 'Pull-ups';
                    
                    html += `
                        <div class="consistency-item">
                            <span>${displayName} (${current}/${goal})</span>
                            <div class="consistency-status status-${status}">${icon}</div>
                        </div>
                    `;
                } else {
                    const current = parseFloat(currentData[key]) || 0;
                    const goal = goals[key];
                    const isGood = key === 'screenTime' ? current <= goal : current >= goal;
                    const status = isGood ? 'good' : 'bad';
                    const icon = isGood ? '‚úì' : '‚úó';
                    
                    let displayName = key.charAt(0).toUpperCase() + key.slice(1);
                    if (key === 'screenTime') displayName = 'Screen Time';
                    
                    html += `
                        <div class="consistency-item">
                            <span>${displayName}</span>
                            <div class="consistency-status status-${status}">${icon}</div>
                        </div>
                    `;
                }
            });
            
            // Cold shower
            html += `
                <div class="consistency-item">
                    <span>Cold Shower</span>
                    <div class="consistency-status status-${currentData.coldShower ? 'good' : 'bad'}">${currentData.coldShower ? '‚úì' : '‚úó'}</div>
                </div>
            `;
            
            // Lust control (inverted)
            html += `
                <div class="consistency-item">
                    <span>Lust Control</span>
                    <div class="consistency-status status-${currentData.lust ? 'bad' : 'good'}">${currentData.lust ? '‚úó' : '‚úì'}</div>
                </div>
            `;
            
            tracker.innerHTML = html;
        }
        
        // ==================== SLEEP ANALYSIS ====================
        function updateSleepAnalysis() {
            const currentData = getCurrentInputs();
            const sleepAnalysis = document.getElementById('sleepAnalysis');
            
            let html = '';
            
            // Sleep Score
            let sleepEmoji = 'üò¥';
            let sleepColor = '#667eea';
            if (currentData.sleepQuality >= 80) {
                sleepEmoji = 'üòä';
                sleepColor = '#4CAF50';
            } else if (currentData.sleepQuality >= 60) {
                sleepEmoji = 'üòê';
                sleepColor = '#FF9800';
            } else if (currentData.sleepQuality > 0) {
                sleepEmoji = 'üòü';
                sleepColor = '#f44336';
            }
            
            // Format sleep time
            let sleepTimeDisplay = '';
            if (currentData.sleepHours > 0 || currentData.sleepMinutes > 0) {
                if (currentData.sleepHours > 0 && currentData.sleepMinutes > 0) {
                    sleepTimeDisplay = `${currentData.sleepHours}h ${currentData.sleepMinutes}m`;
                } else if (currentData.sleepHours > 0) {
                    sleepTimeDisplay = `${currentData.sleepHours}h`;
                } else {
                    sleepTimeDisplay = `${currentData.sleepMinutes}m`;
                }
            }
            
            html += `
                <div class="sleep-score" style="color: ${sleepColor}">
                    ${currentData.sleepQuality > 0 ? currentData.sleepQuality : '--'}/100 ${sleepEmoji}
                </div>
                <div style="text-align: center; color: #666; margin-bottom: 15px;">
                    ${sleepTimeDisplay || 'No sleep data'}
                    ${currentData.napped ? ' + Nap üí§' : ''}
                </div>
            `;
            
            // Sleep stages
            const totalMinutes = currentData.remSleep + currentData.deepSleep + currentData.lightSleep;
            if (totalMinutes > 0) {
                const remPercent = Math.round((currentData.remSleep/totalMinutes)*100);
                const deepPercent = Math.round((currentData.deepSleep/totalMinutes)*100);
                const lightPercent = Math.round((currentData.lightSleep/totalMinutes)*100);
                
                const formatTime = (totalMinutes) => {
                    const hours = Math.floor(totalMinutes / 60);
                    const minutes = totalMinutes % 60;
                    if (hours > 0 && minutes > 0) return `${hours}h ${minutes}m`;
                    if (hours > 0) return `${hours}h`;
                    return `${minutes}m`;
                };
                
                html += `
                    <div class="sleep-breakdown">
                        <div class="sleep-metric" style="border-left: 4px solid #667eea;">
                            <div class="sleep-metric-label">REM Sleep</div>
                            <div class="sleep-metric-value">${formatTime(currentData.remSleep)}</div>
                            <div style="font-size: 0.7rem; color: #888;">${remPercent}%</div>
                            <div class="sleep-stage-bar">
                                <div class="sleep-stage-fill" style="width: ${remPercent}%; background: #667eea;"></div>
                            </div>
                        </div>
                        <div class="sleep-metric" style="border-left: 4px solid #4CAF50;">
                            <div class="sleep-metric-label">Deep Sleep</div>
                            <div class="sleep-metric-value">${formatTime(currentData.deepSleep)}</div>
                            <div style="font-size: 0.7rem; color: #888;">${deepPercent}%</div>
                            <div class="sleep-stage-bar">
                                <div class="sleep-stage-fill" style="width: ${deepPercent}%; background: #4CAF50;"></div>
                            </div>
                        </div>
                        <div class="sleep-metric" style="border-left: 4px solid #FF9800;">
                            <div class="sleep-metric-label">Light Sleep</div>
                            <div class="sleep-metric-value">${formatTime(currentData.lightSleep)}</div>
                            <div style="font-size: 0.7rem; color: #888;">${lightPercent}%</div>
                            <div class="sleep-stage-bar">
                                <div class="sleep-stage-fill" style="width: ${lightPercent}%; background: #FF9800;"></div>
                            </div>
                        </div>
                        <div class="sleep-metric" style="border-left: 4px solid #9C27B0;">
                            <div class="sleep-metric-label">Total Stages</div>
                            <div class="sleep-metric-value">${formatTime(totalMinutes)}</div>
                            <div style="font-size: 0.7rem; color: #888;">${Math.floor(totalMinutes/60)}h ${totalMinutes%60}m</div>
                            <div class="sleep-stage-bar">
                                <div class="sleep-stage-fill" style="width: 100%; background: #9C27B0;"></div>
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee; text-align: center; font-size: 0.9rem; color: #666;">
                        <div>üí° Ideal: 1.5-2h REM, 1-1.5h Deep sleep</div>
                        <div style="font-size: 0.8rem; color: #888; margin-top: 3px;">(20-25% each of total sleep)</div>
                    </div>
                `;
            } else if (currentData.sleep > 0) {
                html += `<div style="text-align: center; color: #888; padding: 20px;">Enter sleep stage details for breakdown</div>`;
            } else {
                html += `<div style="text-align: center; color: #888; padding: 20px;">Enter sleep data to see analysis</div>`;
            }
            
            sleepAnalysis.innerHTML = html;
        }
        
        // ==================== SAVE & LOAD DATA ====================
        function saveData() {
            const today = new Date().toISOString().split('T')[0];
            const data = getCurrentInputs();
            
            let allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            allData[today] = data;
            localStorage.setItem('lifeTrackerData', JSON.stringify(allData));
            
            // Save points
            const pointsData = calculateTodayPoints();
            let pointsHistory = JSON.parse(localStorage.getItem('lifeTrackerPoints')) || { total: 0, days: {} };
            if (!pointsHistory.days[today]) {
                pointsHistory.total += pointsData.total;
                pointsHistory.days[today] = { points: pointsData.total, breakdown: pointsData.breakdown };
                localStorage.setItem('lifeTrackerPoints', JSON.stringify(pointsHistory));
            }
            
            // Success message
            const btn = document.querySelector('.save-btn');
            btn.textContent = '‚úÖ Saved Successfully!';
            btn.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
            setTimeout(() => {
                btn.textContent = 'üíæ Save Today\'s Data';
                btn.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
            }, 2000);
            
            updateChart();
            updateStreakTracker();
            updateTotalStats();
            updatePointsDisplay();
        }
        
        function loadTodaysData() {
            const today = new Date().toISOString().split('T')[0];
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const todaysData = allData[today];
            
            if (!todaysData) return;
            
            // Load basic fields
            Object.keys(todaysData).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    if (element.type === 'checkbox') {
                        element.checked = todaysData[key];
                    } else {
                        element.value = todaysData[key] || '';
                    }
                }
            });
            
            // Show/hide training details based on checkboxes
            if (todaysData.hadGym) document.getElementById('gymDetails').style.display = 'block';
            if (todaysData.hadGym2) document.getElementById('gymDetails2').style.display = 'block';
            if (todaysData.hadHome) document.getElementById('homeDetails').style.display = 'block';
            if (todaysData.hadRun) document.getElementById('runDetails').style.display = 'grid';
            if (todaysData.hadRun2) document.getElementById('runDetails2').style.display = 'grid';
            
            updateCheckboxStyles();
            updateConsistencyTracker();
            updateSleepAnalysis();
            updateBodyweightGoals();
        }
        
        // ==================== POINTS SYSTEM ====================
        function calculateTodayPoints() {
            const currentData = getCurrentInputs();
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const dates = Object.keys(allData).sort();
            const streaks = calculateStreaksWithPause(dates, allData);
            
            let totalPoints = 0;
            let pointsBreakdown = [];
            let completedGoals = 0;
            const totalGoals = Object.keys(goals).length + 2; // +2 for cold shower and lust control
            
            // Calculate points for each goal
            Object.keys(goals).forEach(key => {
                let points = 0;
                let multiplier = 1;
                let description = '';
                let emoji = '';
                
                // Streak multiplier
                const streak = streaks[key] || 0;
                for (const [days, mult] of Object.entries(pointsConfig.streakMultipliers).sort((a, b) => b[0] - a[0])) {
                    if (streak >= parseInt(days)) {
                        multiplier = mult;
                        break;
                    }
                }
                
                if (key === 'training') {
                    let trainingSessions = 0;
                    if (currentData.hadGym) trainingSessions++;
                    if (currentData.hadGym2) trainingSessions++;
                    if (currentData.hadHome) trainingSessions++;
                    if (currentData.hadRun) trainingSessions++;
                    if (currentData.hadRun2) trainingSessions++;
                    
                    if (trainingSessions >= goals.training) {
                        points = pointsConfig.training * multiplier;
                        description = `Training (${trainingSessions} sessions)`;
                        emoji = 'üí™';
                        completedGoals++;
                        
                        if (trainingSessions > goals.training) {
                            const extraSessions = trainingSessions - goals.training;
                            const bonus = extraSessions * 10;
                            points += bonus;
                        }
                    }
                } else if (key === 'pushUps' || key === 'pullUps') {
                    const current = parseInt(currentData[key]) || 0;
                    const goal = goals[key];
                    
                    if (current >= goal) {
                        points = pointsConfig[key] * multiplier;
                        description = key === 'pushUps' ? 'Push-ups' : 'Pull-ups';
                        emoji = key === 'pushUps' ? 'üí™' : 'ü§∏';
                        completedGoals++;
                        
                        // Bonus for exceeding
                        if (current > goal) {
                            const exceeded = current - goal;
                            const bonus = exceeded * pointsConfig.bodyweightExceed;
                            points += bonus;
                            description += ` (+${bonus} bonus)`;
                        }
                    }
                } else {
                    const current = parseFloat(currentData[key]) || 0;
                    const goal = goals[key];
                    const metGoal = key === 'screenTime' ? current <= goal : current >= goal;
                    
                    if (metGoal) {
                        points = pointsConfig[key] * multiplier;
                        description = key.charAt(0).toUpperCase() + key.slice(1);
                        if (key === 'screenTime') description = 'Screen Time';
                        if (key === 'sleep') description = 'Sleep Hours';
                        emoji = getEmojiForActivity(key);
                        completedGoals++;
                        
                        // Bonus for exceeding
                        if (key !== 'screenTime' && current > goal) {
                            const exceeded = current - goal;
                            let bonus = 0;
                            
                            if (key === 'steps') bonus = Math.floor(exceeded * pointsConfig.stepsExceed);
                            else if (key === 'sleep') bonus = Math.floor(exceeded * pointsConfig.sleepExceed);
                            else if (key === 'water') bonus = Math.floor(exceeded * pointsConfig.waterExceed);
                            else if (key === 'pages') bonus = Math.floor(exceeded * pointsConfig.pagesExceed);
                            else if (key === 'stretching') bonus = Math.floor(exceeded * pointsConfig.stretchingExceed);
                            
                            if (bonus > 0) {
                                points += bonus;
                                description += ` (+${bonus} bonus)`;
                            }
                        }
                    }
                }
                
                if (points > 0) {
                    totalPoints += points;
                    pointsBreakdown.push({ emoji, description, points: Math.round(points), multiplier: multiplier > 1 ? `x${multiplier}` : '' });
                }
            });
            
            // Cold shower points
            if (currentData.coldShower) {
                const streak = streaks.coldShower || 0;
                let multiplier = 1;
                for (const [days, mult] of Object.entries(pointsConfig.streakMultipliers).sort((a, b) => b[0] - a[0])) {
                    if (streak >= parseInt(days)) {
                        multiplier = mult;
                        break;
                    }
                }
                const points = pointsConfig.coldShower * multiplier;
                totalPoints += points;
                completedGoals++;
                pointsBreakdown.push({ emoji: 'üöø', description: 'Cold Shower', points: Math.round(points), multiplier: multiplier > 1 ? `x${multiplier}` : '' });
            }
            
            // Sleep quality bonus (above 80)
            const sleepQuality = parseInt(currentData.sleepQuality) || 0;
            if (sleepQuality >= 80) {
                const points = pointsConfig.sleepQuality;
                totalPoints += points;
                pointsBreakdown.push({ emoji: 'üò¥', description: 'Sleep Quality ‚â•80', points: points, multiplier: '' });
            }
            
            // Lust control points (positive if NOT lusting)
            if (!currentData.lust) {
                const streak = streaks.lustControl || 0;
                let multiplier = 1;
                for (const [days, mult] of Object.entries(pointsConfig.streakMultipliers).sort((a, b) => b[0] - a[0])) {
                    if (streak >= parseInt(days)) {
                        multiplier = mult;
                        break;
                    }
                }
                const points = pointsConfig.lustControl * multiplier;
                totalPoints += points;
                completedGoals++;
                pointsBreakdown.push({ emoji: 'üö´', description: 'Lust Control', points: Math.round(points), multiplier: multiplier > 1 ? `x${multiplier}` : '' });
            } else {
                // Deduct points for lust
                const deduction = pointsConfig.lustDeduction;
                totalPoints += deduction;
                pointsBreakdown.push({ emoji: '‚ö†Ô∏è', description: 'Lust (Deduction)', points: deduction, multiplier: '', isNegative: true });
            }
            
            // Daily bonus
            if (completedGoals === totalGoals) {
                totalPoints += pointsConfig.dailyCompletionBonus;
                pointsBreakdown.push({ emoji: 'üèÜ', description: 'All Goals Completed!', points: pointsConfig.dailyCompletionBonus, multiplier: 'BONUS' });
            }
            
            return { total: Math.round(totalPoints), breakdown: pointsBreakdown, completedGoals, totalGoals };
        }
        
        function getEmojiForActivity(activity) {
            const emojis = { stretching: 'üßò', steps: 'üëü', sleep: 'üò¥', water: 'üíß', screenTime: 'üì±', pages: 'üìö', training: 'üí™' };
            return emojis[activity] || '‚≠ê';
        }
        
        function updatePointsDisplay() {
            const pointsData = calculateTodayPoints();
            const lifetimePoints = calculateLifetimePoints();
            
            document.getElementById('totalPoints').textContent = lifetimePoints.total;
            document.getElementById('todayPoints').textContent = `Today: ${pointsData.total} points`;
            
            let html = '';
            if (pointsData.breakdown.length > 0) {
                pointsData.breakdown.forEach(item => {
                    const pointsClass = item.isNegative ? 'points-negative' : 'points-value';
                    const pointsDisplay = item.points > 0 ? `+${item.points}` : item.points;
                    
                    html += `
                        <div class="points-item">
                            <div class="points-activity">
                                <span class="points-emoji">${item.emoji}</span>
                                <span>${item.description}</span>
                            </div>
                            <div>
                                <span class="${pointsClass}">${pointsDisplay}</span>
                                ${item.multiplier ? `<span class="points-multiplier">${item.multiplier}</span>` : ''}
                            </div>
                        </div>
                    `;
                });
            } else {
                html = `<div style="text-align: center; color: #888; padding: 10px;">Complete goals to earn points!</div>`;
            }
            
            document.getElementById('pointsBreakdown').innerHTML = html;
            updateLevelProgress(lifetimePoints.total);
        }
        
        function calculateLifetimePoints() {
            const storedPoints = JSON.parse(localStorage.getItem('lifeTrackerPoints')) || { total: 0 };
            const todayPoints = calculateTodayPoints();
            return { total: storedPoints.total + todayPoints.total };
        }
        
        function updateLevelProgress(totalPoints) {
            const levelProgress = document.getElementById('levelProgress');
            const levelText = document.getElementById('levelText');
            
            let level = 1;
            let pointsNeededForLevel = 100;
            let pointsForNextLevel = 100;
            let pointsInCurrentLevel = totalPoints;
            
            while (pointsInCurrentLevel >= pointsNeededForLevel) {
                pointsInCurrentLevel -= pointsNeededForLevel;
                level++;
                pointsNeededForLevel = level * 100;
                pointsForNextLevel = level * 100;
            }
            
            const progressPercent = (pointsInCurrentLevel / pointsForNextLevel) * 100;
            levelProgress.style.width = `${progressPercent}%`;
            levelText.textContent = `Level ${level} (${pointsInCurrentLevel}/${pointsForNextLevel})`;
        }
        
        // ==================== PAUSE/FREEZE SYSTEM ====================
        function togglePause(streakType) {
            const checkbox = document.getElementById(`pause${streakType.charAt(0).toUpperCase() + streakType.slice(1)}`);
            const toggleElement = checkbox.parentElement;
            
            pausedStreaks[streakType].paused = !pausedStreaks[streakType].paused;
            checkbox.checked = pausedStreaks[streakType].paused;
            toggleElement.classList.toggle('active', pausedStreaks[streakType].paused);
            
            if (pausedStreaks[streakType].paused) {
                pausedStreaks[streakType].days++;
                updatePauseDisplay();
            }
            
            localStorage.setItem('pausedStreaks', JSON.stringify(pausedStreaks));
            updateStreakTracker();
        }
        
        function updatePauseDisplay() {
            Object.keys(pausedStreaks).forEach(streakType => {
                const daysElement = document.getElementById(`pause${streakType.charAt(0).toUpperCase() + streakType.slice(1)}Days`);
                if (daysElement) {
                    daysElement.textContent = `${pausedStreaks[streakType].days} day${pausedStreaks[streakType].days !== 1 ? 's' : ''}`;
                }
                
                const checkbox = document.getElementById(`pause${streakType.charAt(0).toUpperCase() + streakType.slice(1)}`);
                if (checkbox) {
                    const toggleElement = checkbox.parentElement;
                    checkbox.checked = pausedStreaks[streakType].paused;
                    if (toggleElement) {
                        toggleElement.classList.toggle('active', pausedStreaks[streakType].paused);
                    }
                }
            });
        }
        
        function resetPauseCounters() {
            const today = new Date().toISOString().split('T')[0];
            const lastReset = localStorage.getItem('lastPauseReset') || '';
            
            if (today !== lastReset) {
                Object.keys(pausedStreaks).forEach(streakType => {
                    if (!pausedStreaks[streakType].paused) {
                        pausedStreaks[streakType].days = 0;
                    }
                });
                
                localStorage.setItem('lastPauseReset', today);
                localStorage.setItem('pausedStreaks', JSON.stringify(pausedStreaks));
                updatePauseDisplay();
            }
        }
        
        // ==================== STREAK CALCULATION ====================
        function calculateStreaks(dates, allData) {
            const streaks = { 
                stretching: 0, steps: 0, sleep: 0, water: 0, screenTime: 0, pages: 0, 
                training: 0, coldShower: 0, lustControl: 0, pushUps: 0, pullUps: 0 
            };
            if (dates.length === 0) return streaks;
            
            const today = new Date();
            const todayStr = today.toISOString().split('T')[0];
            
            function goalMet(date, goalKey) {
                const dayData = allData[date];
                if (!dayData) return false;
                
                if (goalKey === 'coldShower') return dayData.coldShower === true;
                if (goalKey === 'lustControl') return dayData.lust !== true;
                if (goalKey === 'training') {
                    let sessions = 0;
                    if (dayData.hadGym === true) sessions++;
                    if (dayData.hadRun === true) sessions++;
                    return sessions >= goals.training;
                }
                if (goalKey === 'pushUps' || goalKey === 'pullUps') {
                    const value = parseInt(dayData[goalKey]) || 0;
                    const goal = goals[goalKey];
                    return value >= goal;
                }
                
                const value = parseFloat(dayData[goalKey]) || 0;
                const goal = goals[goalKey];
                return goalKey === 'screenTime' ? value <= goal : value >= goal;
            }
            
            Object.keys(streaks).forEach(goalKey => {
                let streak = 0;
                let checkingDate = new Date(today);
                
                for (let i = 0; i < 365; i++) {
                    const dateStr = checkingDate.toISOString().split('T')[0];
                    const dayData = allData[dateStr];
                    
                    if (dayData && goalMet(dateStr, goalKey)) {
                        streak++;
                    } else {
                        break;
                    }
                    
                    checkingDate.setDate(checkingDate.getDate() - 1);
                }
                
                streaks[goalKey] = streak;
            });
            
            return streaks;
        }
        
        function calculateStreaksWithPause(dates, allData) {
            const streaks = calculateStreaks(dates, allData);
            
            if (pausedStreaks.steps.paused) streaks.steps = Math.max(streaks.steps, pausedStreaks.steps.days + 1);
            if (pausedStreaks.training.paused) streaks.training = Math.max(streaks.training, pausedStreaks.training.days + 1);
            if (pausedStreaks.coldShower.paused) streaks.coldShower = Math.max(streaks.coldShower, pausedStreaks.coldShower.days + 1);
            
            return streaks;
        }
        
        function updateStreakTracker() {
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const dates = Object.keys(allData).sort();
            const streaks = calculateStreaksWithPause(dates, allData);
            
            let html = '';
            Object.keys(streaks).forEach(key => {
                const streak = streaks[key];
                let displayName = key.charAt(0).toUpperCase() + key.slice(1);
                if (key === 'screenTime') displayName = 'Screen Time';
                if (key === 'coldShower') displayName = 'Cold Shower';
                if (key === 'lustControl') displayName = 'Lust Control';
                if (key === 'pushUps') displayName = 'Push-ups';
                if (key === 'pullUps') displayName = 'Pull-ups';
                
                let streakColor = '#666';
                let flameIcon = '';
                let pausedIndicator = '';
                
                if ((key === 'steps' && pausedStreaks.steps.paused) ||
                    (key === 'training' && pausedStreaks.training.paused) ||
                    (key === 'coldShower' && pausedStreaks.coldShower.paused)) {
                    pausedIndicator = ' ‚è∏Ô∏è';
                    streakColor = '#6c757d';
                } else if (streak >= 7) {
                    streakColor = '#4CAF50';
                    flameIcon = 'üî•';
                } else if (streak >= 3) {
                    streakColor = '#FF9800';
                    flameIcon = 'üî•';
                } else if (streak > 0) {
                    streakColor = '#667eea';
                    flameIcon = '‚ú®';
                }
                
                html += `
                    <div class="consistency-item">
                        <span>${displayName}</span>
                        <div style="color: ${streakColor}; font-weight: bold; font-size: 1.1rem;">
                            ${streak} day${streak !== 1 ? 's' : ''} ${flameIcon}${pausedIndicator}
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('streakTracker').innerHTML = html;
        }
        
        // ==================== TOTAL STATISTICS ====================
        function updateTotalStats() {
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const totalStatsElement = document.getElementById('totalStats');
            
            const totals = { 
                stretching: 0, steps: 0, sleep: 0, water: 0, screenTime: 0, pages: 0, 
                gymSessions: 0, runs: 0, totalRunDistance: 0, coldShowers: 0, naps: 0,
                pushUps: 0, pullUps: 0
            };
            let totalDays = 0;
            
            Object.keys(allData).forEach(date => {
                const dayData = allData[date];
                totalDays++;
                
                totals.stretching += parseFloat(dayData.stretching) || 0;
                totals.steps += parseFloat(dayData.steps) || 0;
                totals.sleep += parseFloat(dayData.sleep) || 0;
                totals.water += parseFloat(dayData.water) || 0;
                totals.screenTime += parseFloat(dayData.screenTime) || 0;
                totals.pages += parseFloat(dayData.pages) || 0;
                totals.pushUps += parseInt(dayData.pushUps) || 0;
                totals.pullUps += parseInt(dayData.pullUps) || 0;
                
                if (dayData.hadGym === true) totals.gymSessions++;
                if (dayData.hadRun === true) {
                    totals.runs++;
                    totals.totalRunDistance += parseFloat(dayData.runDistance) || 0;
                }
                
                if (dayData.coldShower === true) totals.coldShowers++;
                if (dayData.napped === true) totals.naps++;
            });
            
            const formatNumber = (num) => {
                if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
                if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
                return Math.round(num * 10) / 10;
            };
            
            totalStatsElement.innerHTML = `
                <div class="consistency-item"><span>üßò Total Stretching</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.stretching)}</div></div>
                <div class="consistency-item"><span>üëü Total Steps</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.steps)}</div></div>
                <div class="consistency-item"><span>üò¥ Total Sleep</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.sleep)}h</div></div>
                <div class="consistency-item"><span>üíß Total Water</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.water)}L</div></div>
                <div class="consistency-item"><span>üì± Total Screen Time</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.screenTime)}h</div></div>
                <div class="consistency-item"><span>üìö Total Pages</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.pages)}</div></div>
                <div class="consistency-item"><span>üí™ Total Push-ups</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.pushUps)}</div></div>
                <div class="consistency-item"><span>ü§∏ Total Pull-ups</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.pullUps)}</div></div>
                <div class="consistency-item"><span>üèãÔ∏è Gym Sessions</span><div style="font-weight: bold; color: #667eea;">${totals.gymSessions}</div></div>
                <div class="consistency-item"><span>üèÉ Total Runs</span><div style="font-weight: bold; color: #667eea;">${totals.runs}</div></div>
                <div class="consistency-item"><span>üìè Total Distance</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.totalRunDistance)}km</div></div>
                <div class="consistency-item"><span>üöø Cold Showers</span><div style="font-weight: bold; color: #4CAF50;">${totals.coldShowers}</div></div>
                <div class="consistency-item"><span>üò¥ Naps Taken</span><div style="font-weight: bold; color: #667eea;">${totals.naps}</div></div>
                <div class="consistency-item"><span>üìÖ Days Tracked</span><div style="font-weight: bold; color: #764ba2;">${totalDays}</div></div>
            `;
        }
        
        // ==================== CHART FUNCTIONS ====================
        function showChart(type) {
            currentView = type;
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateChart();
        }
        
        function changePeriod(period) {
            currentPeriod = period;
            document.querySelectorAll('.period-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateChart();
        }
        
        function initializeChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            currentChart = new Chart(ctx, {
                type: 'line',
                data: { labels: [], datasets: [] },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true } },
                    plugins: { legend: { display: true, position: 'top' } }
                }
            });
            updateChart();
        }
        
        function updateChart() {
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const dates = Object.keys(allData).sort();
            const chartData = getChartData(dates, allData);
            
            if (currentChart) {
                currentChart.data = chartData;
                currentChart.update();
            }
            
            const titles = {
                stretching: 'Stretching Sessions',
                steps: 'Steps Taken',
                sleep: 'Sleep Hours',
                water: 'Water Intake (Liters)',
                screenTime: 'Screen Time (Hours)',
                pages: 'Pages Read',
                training: 'Training Sessions'
            };
            
            const periodText = currentPeriod === 'daily' ? 'Last 7 Days' : 
                              currentPeriod === 'weekly' ? 'Last 4 Weeks' : 'Last 6 Months';
            
            document.getElementById('chartTitle').textContent = `${titles[currentView] || currentView} - ${periodText}`;
        }
        
        function getChartData(dates, allData) {
            const now = new Date();
            let filteredDates = [];
            
            if (currentPeriod === 'daily') {
                for (let i = 6; i >= 0; i--) {
                    const date = new Date(now);
                    date.setDate(date.getDate() - i);
                    filteredDates.push(date.toISOString().split('T')[0]);
                }
            } else if (currentPeriod === 'weekly') {
                for (let i = 3; i >= 0; i--) {
                    const date = new Date(now);
                    date.setDate(date.getDate() - (i * 7));
                    filteredDates.push(`Week of ${date.toLocaleDateString()}`);
                }
            } else {
                for (let i = 5; i >= 0; i--) {
                    const date = new Date(now);
                    date.setMonth(date.getMonth() - i);
                    filteredDates.push(date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' }));
                }
            }
            
            return getSingleMetricChartData(filteredDates, allData, currentView);
        }
        
        function getSingleMetricChartData(labels, allData, metric) {
            const data = labels.map(label => {
                if (currentPeriod === 'daily') {
                    const dayData = allData[label];
                    if (metric === 'training') {
                        if (dayData) {
                            let sessions = 0;
                            if (dayData.hadGym === true) sessions++;
                            if (dayData.hadRun === true) sessions++;
                            return sessions;
                        }
                        return 0;
                    }
                    return dayData ? (parseFloat(dayData[metric]) || 0) : 0;
                }
                return 0;
            });
            
            const colors = {
                stretching: '#667eea',
                steps: '#4CAF50',
                sleep: '#2196F3',
                water: '#00BCD4',
                screenTime: '#FF9800',
                pages: '#9C27B0',
                training: '#f44336'
            };
            
            return {
                labels,
                datasets: [{
                    label: metric.charAt(0).toUpperCase() + metric.slice(1),
                    data,
                    borderColor: colors[metric] || '#667eea',
                    backgroundColor: (colors[metric] || '#667eea') + '20',
                    tension: 0.4,
                    fill: true
                }]
            };
        }
        
        // ==================== RESET FUNCTIONS ====================
        function showResetConfirm() {
            document.getElementById('resetConfirm').style.display = 'block';
        }
        
        function hideResetConfirm() {
            document.getElementById('resetConfirm').style.display = 'none';
        }
        
        function hardReset() {
            localStorage.removeItem('lifeTrackerData');
            localStorage.removeItem('pausedStreaks');
            localStorage.removeItem('lastPauseReset');
            localStorage.removeItem('lifeTrackerPoints');
            
            // Clear all inputs
            document.querySelectorAll('input, select').forEach(el => {
                if (el.type === 'checkbox' || el.type === 'radio') {
                    el.checked = false;
                } else {
                    el.value = '';
                }
            });
            
            // Hide details
            ['gymDetails', 'gymDetails2', 'homeDetails', 'runDetails', 'runDetails2'].forEach(id => {
                document.getElementById(id).style.display = 'none';
            });
            
            // Reset pause
            pausedStreaks = { steps: { paused: false, days: 0 }, training: { paused: false, days: 0 }, coldShower: { paused: false, days: 0 } };
            localStorage.setItem('pausedStreaks', JSON.stringify(pausedStreaks));
            localStorage.setItem('lastPauseReset', new Date().toISOString().split('T')[0]);
            
            hideResetConfirm();
            
            // Update UI
            updateCheckboxStyles();
            updateConsistencyTracker();
            updateSleepAnalysis();
            updateBodyweightGoals();
            updateStreakTracker();
            updateTotalStats();
            updatePauseDisplay();
            updatePointsDisplay();
            updateChart();
            
            // Success message
            const resetBtn = document.querySelector('.reset-btn');
            resetBtn.textContent = '‚úÖ All Data Cleared!';
            resetBtn.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
            setTimeout(() => {
                resetBtn.textContent = 'üóëÔ∏è Hard Reset All Data';
                resetBtn.style.background = 'linear-gradient(135deg, #f44336, #d32f2f)';
            }, 3000);
        }
    </script>
</body>
</html>
