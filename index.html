<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeTracker Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ALL ORIGINAL CSS STYLES REMAIN EXACTLY THE SAME */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .date-display {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
        }
        
        .tracking-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: calc(100vh - 200px);
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }
        
        .quote-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .quote-text {
            font-style: italic;
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #555;
        }
        
        .quote-author {
            font-weight: bold;
            color: #667eea;
        }
        
        .consistency-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .consistency-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .consistency-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .consistency-item:last-child {
            border-bottom: none;
        }
        
        .consistency-status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
        }
        
        .status-good {
            background: #4CAF50;
        }
        
        .status-bad {
            background: #f44336;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .input-group {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .input-group:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .sleep-expanded, .training-expanded {
            grid-column: span 2;
        }
        
        .sleep-details, .training-checkboxes, .run-details, .bodyweight-details {
            margin-top: 15px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .sleep-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .sleep-score {
            text-align: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
            color: #667eea;
        }
        
        .hour-minute-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
        }
        
        .hour-minute-group input {
            text-align: center;
            padding: 8px;
        }
        
        .sleep-time-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .sleep-time-inputs > div {
            display: flex;
            flex-direction: column;
        }
        
        .sleep-time-inputs label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .sleep-breakdown {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .sleep-metric {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
        }
        
        .sleep-metric-label {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .sleep-metric-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
        }
        
        .sleep-stage-bar {
            height: 8px;
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
            background: #e0e0e0;
        }
        
        .sleep-stage-fill {
            height: 100%;
            border-radius: 4px;
        }
        
        .sleep-detail-item, .run-detail-item {
            display: flex;
            flex-direction: column;
        }
        
        .sleep-detail-item label, .run-detail-item label {
            font-size: 0.9rem;
            margin-bottom: 5px;
            color: #666;
        }
        
        .sleep-detail-item input, .run-detail-item input, .run-detail-item select {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
        }
        
        .run-detail-item select {
            cursor: pointer;
            background: white;
        }
        
        .training-checkboxes {
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .run-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #e0e0e0;
        }
        
        .sick-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 10px;
        }
        
        .sick-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .sick-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .sick-toggle:hover {
            background: #e9ecef;
        }
        
        .sick-toggle.active {
            background: #d1ecf1;
            border: 2px solid #0dcaf0;
        }
        
        .sick-checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }
        
        .sick-label {
            flex-grow: 1;
            margin-left: 10px;
            font-weight: 600;
            color: #333;
        }
        
        .sick-indicator {
            font-size: 0.9rem;
            color: #0dcaf0;
            background: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
        }
        
        .sick-note {
            font-size: 0.8rem;
            color: #666;
            text-align: center;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }

        .rest-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 10px;
        }
        
        .rest-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .rest-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .rest-toggle:hover {
            background: #e9ecef;
        }
        
        .rest-toggle.active {
            background: #fff3cd;
            border: 2px solid #ffc107;
        }
        
        .rest-checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }
        
        .rest-label {
            flex-grow: 1;
            margin-left: 10px;
            font-weight: 600;
            color: #333;
        }
        
        .rest-indicator {
            font-size: 0.9rem;
            color: #ffc107;
            background: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
        }
        
        .reset-section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 10px;
        }
        
        .reset-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .reset-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }
        
        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
        }
        
        .reset-confirm {
            display: none;
            margin-top: 10px;
            padding: 15px;
            background: #fff3cd;
            border-radius: 10px;
            border: 1px solid #ffc107;
        }
        
        .reset-confirm-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .reset-confirm-btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .reset-confirm-yes {
            background: #f44336;
            color: white;
        }
        
        .reset-confirm-yes:hover {
            background: #d32f2f;
        }
        
        .reset-confirm-no {
            background: #6c757d;
            color: white;
        }
        
        .reset-confirm-no:hover {
            background: #545b62;
        }
        
        .reset-note {
            font-size: 0.8rem;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }

        .points-card {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .points-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .points-title {
            font-size: 1.3rem;
            color: #333;
        }
        
        .points-total {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(255, 215, 0, 0.3);
        }
        
        .points-breakdown {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
        
        .points-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .points-item:last-child {
            border-bottom: none;
        }
        
        .points-activity {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .points-emoji {
            font-size: 1.2rem;
        }
        
        .points-value {
            font-weight: bold;
            color: #FF9800;
        }
        
        .points-multiplier {
            font-size: 0.8rem;
            color: #4CAF50;
            margin-left: 5px;
        }
        
        .points-negative {
            color: #f44336;
        }
        
        .points-today {
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #FFD700;
            font-weight: bold;
            color: #333;
        }
        
        .level-indicator {
            margin-top: 10px;
            text-align: center;
        }
        
        .level-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 5px 0;
        }
        
        .level-progress {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .level-text {
            font-size: 0.9rem;
            color: #666;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .checkbox-group label {
            margin: 0;
            cursor: pointer;
        }
        
        .cold-shower-checked {
            background: linear-gradient(135deg, #4CAF50, #45a049) !important;
            color: white;
        }
        
        .lust-checked {
            background: linear-gradient(135deg, #f44336, #d32f2f) !important;
            color: white;
        }
        
        .nav-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .nav-btn.active {
            background: #764ba2;
        }
        
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            height: 480px; 
            position: relative;
        }
        
        .chart-title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.5rem;
            color: #333;
        }

        .chart-wrapper {
            position: absolute;
            top: 70px;
            bottom: 20px;
            left: 20px;
            right: 20px;
        }
        
        .period-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .period-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            border-radius: 20px;
            background: white;
            color: #667eea;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .period-btn.active {
            background: #667eea;
            color: white;
        }
        
        .save-btn {
            display: block;
            width: 200px;
            margin: 30px auto;
            padding: 15px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }

        .training-details {
            margin-top: 10px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .training-details input {
            width: 100%;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
            margin-top: 5px;
        }
        
        .run-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        
        .run-detail-item {
            display: flex;
            flex-direction: column;
        }
        
        .run-detail-item label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .run-detail-item input,
        .run-detail-item select {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
        }
        
        .run-detail-item select {
            cursor: pointer;
            background: white;
        }
        
        .bodyweight-goals {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            margin-top: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .bodyweight-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }
        
        .bodyweight-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .bodyweight-item {
            display: flex;
            flex-direction: column;
        }
        
        .bodyweight-item label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .bodyweight-item input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        .bodyweight-goal-display {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        
        .bodyweight-goal {
            text-align: center;
            flex: 1;
        }
        
        .bodyweight-goal-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .bodyweight-goal-label {
            font-size: 0.8rem;
            color: #666;
        }
        
        .training-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            background: #667eea;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .training-toggle:hover {
            background: #5a6fd8;
        }
        
        .training-toggle i {
            transition: transform 0.3s ease;
        }
        
        .training-toggle.collapsed i {
            transform: rotate(-90deg);
        }
        
        .training-content {
            max-height: 1000px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .training-content.collapsed {
            max-height: 0;
        }
        
        .overall-consistency {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .overall-consistency-value {
            font-size: 3rem;
            font-weight: bold;
            color: #4CAF50;
            margin: 10px 0;
        }
        
        .overall-consistency-label {
            font-size: 1.1rem;
            color: #666;
        }
        
        .consistency-percentage {
            font-size: 0.9rem;
            color: #888;
            margin-left: 5px;
        }
        
        .habit-consistency {
            font-size: 0.8rem;
            color: #888;
            margin-top: 2px;
        }
        
        /* NEW STYLES ONLY FOR ADDED FEATURES */
        .training-session-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }
        
        .training-session-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .training-session-type {
            font-weight: 600;
            color: #667eea;
        }
        
        .remove-training-btn {
            background: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .training-fields-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .training-field {
            display: flex;
            flex-direction: column;
        }
        
        .training-field label {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 3px;
        }
        
        .add-training-btn {
            width: 100%;
            padding: 10px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
            transition: all 0.3s ease;
        }
        
        .add-training-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }
        
        .hygiene-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .hygiene-option {
            flex: 1;
            text-align: center;
        }
        
        .hygiene-option input {
            display: none;
        }
        
        .hygiene-option label {
            display: block;
            padding: 8px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }
        
        .hygiene-option input:checked + label {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .new-goal-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 6px;
            margin-top: 10px;
            transition: all 0.3s ease;
        }
        
        .new-goal-checkbox:hover {
            border-color: #667eea;
        }
        
        .new-goal-checkbox input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .new-goal-checkbox label {
            flex: 1;
            margin: 0;
            cursor: pointer;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .sidebar {
                position: static;
                max-height: none;
            }
            
            .sleep-expanded, .training-expanded {
                grid-column: span 1;
            }
            
            .sleep-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåü LifeTracker Pro</h1>
            <div class="date-display" id="currentDate"></div>
        </div>
        <div class="main-content">
            <div class="tracking-section">
                <div class="input-grid">
                    <div class="input-group"><label for="stretching">üßò Stretching Sessions</label> <input type="number" id="stretching" placeholder="Enter sessions"></div>
                    <div class="input-group"><label for="steps">üëü Steps Taken</label> <input type="number" id="steps" placeholder="Enter steps"></div>
                    <div class="input-group sleep-expanded">
                        <label for="sleepHours">üò¥ Sleep Time</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                            <div>
                                <label for="sleepHours" style="font-size: 0.9rem; color: #666;">Hours</label>
                                <input type="number" id="sleepHours" step="0.5" placeholder="Hours" min="0" max="24">
                            </div>
                            <div>
                                <label for="sleepMinutes" style="font-size: 0.9rem; color: #666;">Minutes</label>
                                <input type="number" id="sleepMinutes" placeholder="Minutes" min="0" max="59">
                            </div>
                        </div>
                        <div class="sleep-details">
                            <div class="sleep-detail-item">
                                <label for="sleepQuality">Quality (1-100)</label>
                                <input type="number" id="sleepQuality" min="1" max="100" placeholder="Rate 1-100">
                            </div>
                            
                            <div class="sleep-detail-item">
                                <label>REM Sleep</label>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                                    <input type="number" id="remHours" placeholder="H" min="0" max="24" style="text-align: center;">
                                    <input type="number" id="remMinutes" placeholder="M" min="0" max="59" style="text-align: center;">
                                </div>
                            </div>
                            
                            <div class="sleep-detail-item">
                                <label>Deep Sleep</label>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                                    <input type="number" id="deepHours" placeholder="H" min="0" max="24" style="text-align: center;">
                                    <input type="number" id="deepMinutes" placeholder="M" min="0" max="59" style="text-align: center;">
                                </div>
                            </div>
                            
                            <div class="sleep-detail-item">
                                <label>Light Sleep</label>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                                    <input type="number" id="lightHours" placeholder="H" min="0" max="24" style="text-align: center;">
                                    <input type="number" id="lightMinutes" placeholder="M" min="0" max="59" style="text-align: center;">
                                </div>
                            </div>
                            
                            <div class="checkbox-group" style="margin-top: 10px;">
                                <input type="checkbox" id="napped">
                                <label for="napped">Took a nap today</label>
                            </div>
                        </div>
                    </div>
                    <div class="input-group"><label for="water">üíß Water (Liters)</label> <input type="number" id="water" step="0.1" placeholder="Enter liters"></div>
                    <div class="input-group"><label for="screenTime">üì± Screen Time (Hours)</label> <input type="number" id="screenTime" step="0.5" placeholder="Enter hours"></div>
                    <div class="input-group"><label for="pages">üìö Pages Read</label> <input type="number" id="pages" placeholder="Enter pages"></div>
                    
                    <!-- NEW: Healthy Eating -->
                    <div class="input-group">
                        <label>ü•ó Healthy Eating</label>
                        <div class="new-goal-checkbox">
                            <input type="checkbox" id="healthyEating">
                            <label for="healthyEating">Ate healthy today</label>
                        </div>
                    </div>
                    
                    <!-- NEW: Make Bed -->
                    <div class="input-group">
                        <label>üõèÔ∏è Make Bed</label>
                        <div class="new-goal-checkbox">
                            <input type="checkbox" id="makeBed">
                            <label for="makeBed">Made my bed today</label>
                        </div>
                    </div>
                    
                    <!-- NEW: Hygiene -->
                    <div class="input-group">
                        <label>üßº Daily Hygiene</label>
                        <div class="hygiene-options">
                            <div class="hygiene-option">
                                <input type="radio" id="hygiene0" name="hygiene" value="0">
                                <label for="hygiene0">0 Times</label>
                            </div>
                            <div class="hygiene-option">
                                <input type="radio" id="hygiene1" name="hygiene" value="1">
                                <label for="hygiene1">1 Time</label>
                            </div>
                            <div class="hygiene-option">
                                <input type="radio" id="hygiene2" name="hygiene" value="2">
                                <label for="hygiene2">2 Times</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-group training-expanded">
                        <label>üí™ Training Sessions (Goal: 1 per day)</label>
                        
                        <div class="training-toggle" onclick="toggleTrainingDetails()">
                            <span>Training Details</span>
                            <i>‚ñº</i>
                        </div>
                        
                        <div class="training-content" id="trainingContent">
                            <!-- Dynamic training sessions will be added here -->
                            <div id="trainingSessionsContainer"></div>
                            
                            <button class="add-training-btn" onclick="addTrainingSession()">
                                + Add Training Session
                            </button>
                            
                            <!-- Bodyweight Goals -->
                            <div class="bodyweight-goals">
                                <div class="bodyweight-title">üèãÔ∏è Bodyweight Goals</div>
                                <div class="bodyweight-inputs">
                                    <div class="bodyweight-item">
                                        <label for="pushUps">Push-ups Count</label>
                                        <input type="number" id="pushUps" placeholder="Enter push-ups count" min="0">
                                    </div>
                                    <div class="bodyweight-item">
                                        <label for="pullUps">Pull-ups Count</label>
                                        <input type="number" id="pullUps" placeholder="Enter pull-ups count" min="0">
                                    </div>
                                </div>
                                <div class="bodyweight-goal-display">
                                    <div class="bodyweight-goal">
                                        <div class="bodyweight-goal-value" id="pushUpsGoal">0/50</div>
                                        <div class="bodyweight-goal-label">Push-ups Goal</div>
                                    </div>
                                    <div class="bodyweight-goal">
                                        <div class="bodyweight-goal-value" id="pullUpsGoal">0/20</div>
                                        <div class="bodyweight-goal-label">Pull-ups Goal</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="input-group" id="coldShowerGroup"><label>üöø Cold Shower</label>
                        <div class="checkbox-group"><input type="checkbox" id="coldShower"> <label for="coldShower">Took cold shower today</label></div>
                    </div>
                    <div class="input-group" id="lustGroup"><label>üö´ Lust Control</label>
                        <div class="checkbox-group"><input type="checkbox" id="lust"> <label for="lust">Broke lust control (check if failed)</label></div>
                    </div>
                </div>
                <button class="save-btn" onclick="saveData()">üíæ Save Today's Data</button>
                
                <!-- Updated Chart Navigation -->
                <div class="nav-buttons">
                    <button class="nav-btn active" onclick="showChart('stretching')">üßò Stretching</button>
                    <button class="nav-btn" onclick="showChart('steps')">üëü Steps</button>
                    <button class="nav-btn" onclick="showChart('sleep')">üò¥ Sleep</button>
                    <button class="nav-btn" onclick="showChart('water')">üíß Water</button>
                    <button class="nav-btn" onclick="showChart('screenTime')">üì± Screen Time</button>
                    <button class="nav-btn" onclick="showChart('pages')">üìö Reading</button>
                    <button class="nav-btn" onclick="showChart('training')">üí™ Training</button>
                    <button class="nav-btn" onclick="showChart('healthyEating')">ü•ó Healthy</button>
                    <button class="nav-btn" onclick="showChart('makeBed')">üõèÔ∏è Bed</button>
                    <button class="nav-btn" onclick="showChart('hygiene')">üßº Hygiene</button>
                    <button class="nav-btn" onclick="showChart('consistency')">üìä Consistency</button>
                </div>
                
                <div class="chart-container">
                    <div class="period-selector">
                        <button class="period-btn active" onclick="changePeriod('daily')">Daily</button>
                        <button class="period-btn" onclick="changePeriod('weekly')">Weekly</button>
                        <button class="period-btn" onclick="changePeriod('monthly')">Monthly</button>
                    </div>
                    <div class="chart-title" id="chartTitle">Stretching Sessions - Last 7 Days</div>
                    <div class="chart-wrapper">
                        <canvas id="mainChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar (unchanged) -->
            <div class="sidebar">
                <div class="overall-consistency">
                    <div class="overall-consistency-label">Overall Consistency</div>
                    <div class="overall-consistency-value" id="overallConsistency">0%</div>
                    <div style="font-size: 0.9rem; color: #666;">Your commitment level</div>
                </div>
                
                <div class="points-card">
                    <div class="points-header">
                        <div class="points-title">üéÆ Points System</div>
                        <div class="points-total" id="totalPoints">0</div>
                    </div>
                    <div class="level-indicator">
                        <div class="level-text" id="levelText">Level 1 (0/100)</div>
                        <div class="level-bar">
                            <div class="level-progress" id="levelProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="points-today" id="todayPoints">Today: 0 points</div>
                    <div class="points-breakdown" id="pointsBreakdown">
                        <!-- Points breakdown will be added here by JavaScript -->
                    </div>
                </div>
                
                <div class="sick-section">
                    <div class="sick-title">ü§í Sick Day</div>
                    <div class="sick-toggle" onclick="toggleSick()">
                        <input type="checkbox" class="sick-checkbox" id="sickToggle">
                        <span class="sick-label">I'm sick today</span>
                        <span class="sick-indicator" id="sickIndicator">OFF</span>
                    </div>
                    <div class="sick-note">Pauses streaks for: Steps, Push-ups, Pull-ups, Training. No penalties for missed goals.</div>
                </div>
                
                <div class="rest-section">
                    <div class="rest-title">üõå Rest Day</div>
                    <div class="rest-toggle" onclick="toggleRest()">
                        <input type="checkbox" class="rest-checkbox" id="restToggle">
                        <span class="rest-label">Rest day (running only)</span>
                        <span class="rest-indicator" id="restIndicator">OFF</span>
                    </div>
                    <div class="sick-note">Pauses only running-related streaks. Does not affect gym or bodyweight.</div>
                </div>
                
                <div class="reset-section">
                    <div class="reset-title">‚ö†Ô∏è Reset All Data</div>
                    <button class="reset-btn" onclick="showResetConfirm()">üóëÔ∏è Hard Reset All Data</button>
                    <div class="reset-confirm" id="resetConfirm">
                        <div style="color: #856404; margin-bottom: 10px; font-weight: 600;">
                            ‚ö†Ô∏è Are you sure? This will delete ALL data permanently!
                        </div>
                        <div class="reset-confirm-buttons">
                            <button class="reset-confirm-btn reset-confirm-yes" onclick="hardReset()">Yes, Delete Everything</button>
                            <button class="reset-confirm-btn reset-confirm-no" onclick="hideResetConfirm()">Cancel</button>
                        </div>
                    </div>
                    <div class="reset-note">This will clear all input fields and delete all saved data</div>
                </div>
                
                <div class="quote-card">
                    <div class="quote-text" id="dailyQuote"></div>
                    <div class="quote-author" id="quoteAuthor"></div>
                </div>
                <div class="sleep-card">
                    <div class="consistency-title">üò¥ Sleep Analysis</div>
                    <div id="sleepAnalysis">
                        <div style="text-align: center; color: #888; padding: 20px;">Enter sleep data to see analysis</div>
                    </div>
                </div>
                <div class="consistency-card">
                    <div class="consistency-title">üéØ Today's Goals</div>
                    <div id="consistencyTracker"></div>
                </div>
                <div class="consistency-card">
                    <div class="consistency-title">üî• Consistency Streaks</div>
                    <div id="streakTracker"></div>
                </div>
                <div class="consistency-card">
                    <div class="consistency-title">üìä Habit Consistency</div>
                    <div id="habitConsistency"></div>
                </div>
                <div class="consistency-card">
                    <div class="consistency-title">üìà Total Statistics</div>
                    <div id="totalStats"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Motivational quotes
        const quotes = [
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
            { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
            { text: "It is during our darkest moments that we must focus to see the light.", author: "Aristotle" },
            { text: "The only impossible journey is the one you never begin.", author: "Tony Robbins" },
            { text: "In the middle of difficulty lies opportunity.", author: "Albert Einstein" },
            { text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
            { text: "The way to get started is to quit talking and begin doing.", author: "Walt Disney" },
            { text: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
            { text: "A year from now you may wish you had started today.", author: "Karen Lamb" }
        ];
        
        // Updated Goals for consistency tracking
        const goals = {
            stretching: 2,
            steps: 10000,
            sleep: 8,
            water: 2,
            screenTime: 2,
            pages: 20,
            training: 1, // CHANGED: Now only 1 training per day required
            pushUps: 50,
            pullUps: 20,
            healthyEating: 1, // NEW: 1 = ate healthy
            makeBed: 1, // NEW: 1 = made bed
            hygiene: 2 // NEW: goal is 2 times per day
        };
        
        // Training types
        const trainingTypes = ['gym', 'home', 'run'];
        const trainingLabels = {
            'gym': 'üèãÔ∏è Gym Session',
            'home': 'üè† Home Workout',
            'run': 'üèÉ Running Session'
        };
        
        // Sick/Rest day storage
        let sickRestDays = JSON.parse(localStorage.getItem('sickRestDays')) || {
            sick: { active: false, history: [] },
            rest: { active: false, history: [] }
        };
        
        // Inactivity tracking
        let inactivityTracker = JSON.parse(localStorage.getItem('inactivityTracker')) || {};
        
        let currentChart = null;
        let currentView = 'stretching';
        let currentPeriod = 'daily';
        let trainingSessionCounter = 0;
        
        // Updated Points System Configuration
        const pointsConfig = {
            // Base points for completing goals
            stretching: 15,
            steps: 20,
            sleep: 35,
            water: 20,
            screenTime: 35,
            pages: 15,
            training: 30,
            coldShower: 20,
            lustControl: 40,
            pushUps: 15,
            pullUps: 15,
            healthyEating: 25, // NEW
            makeBed: 15, // NEW
            hygiene: 20, // NEW
            
            // Deductions for missing goals
            stretchingDeduction: -20,
            stepsDeduction: -25,
            waterDeduction: -15,
            screenTimeDeduction: -35,
            pagesDeduction: -20,
            pushUpsDeduction: -20,
            pullUpsDeduction: -20,
            trainingDeduction: -20,
            healthyEatingDeduction: -20, // NEW
            makeBedDeduction: -15, // NEW
            hygieneDeduction: -15, // NEW (for 0 times)
            hygienePartialDeduction: -10, // NEW (for 1 time when goal is 2)
            
            // Sleep strict rules
            sleepQualityBonus: 25,
            sleepDurationDeduction: -15,
            sleepQualityDeduction: -20,
            
            // Bodyweight bonus multiplier
            bodyweightBothBonus: 1.7,
            
            // Training bonuses
            durationBonus: 20,
            intensityBonus: 25,
            extraTrainingBonus: 15, // Bonus for each extra training beyond the first
            
            // Steps overachievement
            stepsMultiplierPer1500: 0.4,
            maxStepsMultipliers: 100,
            
            // Streak multipliers
            streakMultipliers: {
                3: 1.3,
                7: 1.5,
                14: 2.0
            },
            
            // Inactivity penalty
            inactivityPenalty: -35,
            
            // Consistency bonuses
            weeklyConsistencyBonus: 50,
            
            dailyCompletionBonus: 75
        };
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            displayCurrentDate();
            displayDailyQuote();
            loadTodaysData();
            updateConsistencyTracker();
            updateStreakTracker();
            updateTotalStats();
            updatePointsDisplay();
            updateHabitConsistency();
            initializeChart();
            
            // Initialize sick/rest toggles
            updateSickRestDisplay();
            
            // Add initial training session if none exist
            const container = document.getElementById('trainingSessionsContainer');
            if (container.children.length === 0) {
                addTrainingSession();
            }
            
            // Bodyweight inputs listeners
            document.getElementById('pushUps').addEventListener('input', function() {
                updateBodyweightGoals();
                updateConsistencyTracker();
                updatePointsDisplay();
            });
            
            document.getElementById('pullUps').addEventListener('input', function() {
                updateBodyweightGoals();
                updateConsistencyTracker();
                updatePointsDisplay();
            });
            
            // General input listeners
            ['stretching', 'steps', 'sleepHours', 'water', 'screenTime', 'pages'].forEach(id => {
                document.getElementById(id).addEventListener('input', function() {
                    updateConsistencyTracker();
                    updatePointsDisplay();
                });
            });
            
            // Sleep input listeners
            ['sleepHours', 'sleepMinutes', 'sleepQuality', 'remHours', 'remMinutes', 
             'deepHours', 'deepMinutes', 'lightHours', 'lightMinutes'].forEach(id => {
                document.getElementById(id).addEventListener('input', function() {
                    updateSleepAnalysis();
                    updateConsistencyTracker();
                    updatePointsDisplay();
                });
            });
            
            // Checkbox listeners
            ['coldShower', 'lust', 'napped', 'healthyEating', 'makeBed'].forEach(id => {
                document.getElementById(id).addEventListener('change', function() {
                    if (id === 'coldShower' || id === 'lust') updateCheckboxStyles();
                    if (id === 'napped') updateSleepAnalysis();
                    updateConsistencyTracker();
                    updatePointsDisplay();
                });
            });
            
            // Hygiene radio buttons listener
            document.querySelectorAll('input[name="hygiene"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    updateConsistencyTracker();
                    updatePointsDisplay();
                });
            });
            
            // Initialize displays
            updateSleepAnalysis();
            updateBodyweightGoals();
        });
        
        // ==================== TRAINING SESSIONS ====================
        function addTrainingSession(type = 'gym') {
            trainingSessionCounter++;
            const container = document.getElementById('trainingSessionsContainer');
            
            const sessionDiv = document.createElement('div');
            sessionDiv.className = 'training-session-item';
            sessionDiv.id = `training-session-${trainingSessionCounter}`;
            
            sessionDiv.innerHTML = `
                <div class="training-session-header">
                    <div class="training-session-type">${trainingLabels[type]} ${trainingSessionCounter}</div>
                    <button class="remove-training-btn" onclick="removeTrainingSession(${trainingSessionCounter})">√ó</button>
                </div>
                <div class="training-fields-grid">
                    <div class="training-field">
                        <label for="sessionType-${trainingSessionCounter}">Type</label>
                        <select id="sessionType-${trainingSessionCounter}" onchange="updateSessionType(${trainingSessionCounter})">
                            <option value="gym" ${type === 'gym' ? 'selected' : ''}>Gym</option>
                            <option value="home" ${type === 'home' ? 'selected' : ''}>Home Workout</option>
                            <option value="run" ${type === 'run' ? 'selected' : ''}>Running</option>
                        </select>
                    </div>
                    <div class="training-field">
                        <label for="sessionDuration-${trainingSessionCounter}">Duration (min)</label>
                        <input type="number" id="sessionDuration-${trainingSessionCounter}" placeholder="Minutes" min="0" oninput="updateTrainingStats()">
                    </div>
                    <div class="training-field">
                        <label for="sessionIntensity-${trainingSessionCounter}">Intensity (1-10)</label>
                        <input type="number" id="sessionIntensity-${trainingSessionCounter}" min="1" max="10" placeholder="1-10" oninput="updateTrainingStats()">
                    </div>
                    ${type === 'run' ? `
                    <div class="training-field">
                        <label for="sessionDistance-${trainingSessionCounter}">Distance (km)</label>
                        <input type="number" id="sessionDistance-${trainingSessionCounter}" step="0.1" placeholder="Distance" oninput="updateTrainingStats()">
                    </div>
                    ` : ''}
                </div>
                <div style="margin-top: 10px; font-size: 0.85rem; color: #666;">
                    ${type === 'gym' ? 'üèãÔ∏è Gym session' : type === 'home' ? 'üè† Home workout' : 'üèÉ Running session'}
                </div>
            `;
            
            container.appendChild(sessionDiv);
            updateTrainingStats();
        }
        
        function removeTrainingSession(id) {
            const session = document.getElementById(`training-session-${id}`);
            if (session) {
                session.remove();
                updateTrainingStats();
            }
        }
        
        function updateSessionType(id) {
            const select = document.getElementById(`sessionType-${id}`);
            const type = select.value;
            const sessionDiv = document.getElementById(`training-session-${id}`);
            
            // Update label
            const typeLabel = sessionDiv.querySelector('.training-session-type');
            typeLabel.textContent = `${trainingLabels[type]} ${id}`;
            
            // Update description
            const desc = sessionDiv.querySelector('div[style*="margin-top: 10px"]');
            desc.textContent = type === 'gym' ? 'üèãÔ∏è Gym session' : type === 'home' ? 'üè† Home workout' : 'üèÉ Running session';
            
            // Update distance field
            const fieldsGrid = sessionDiv.querySelector('.training-fields-grid');
            const existingDistanceField = document.getElementById(`sessionDistance-${id}`);
            
            if (type === 'run') {
                if (!existingDistanceField) {
                    // Add distance field
                    const distanceField = document.createElement('div');
                    distanceField.className = 'training-field';
                    distanceField.innerHTML = `
                        <label for="sessionDistance-${id}">Distance (km)</label>
                        <input type="number" id="sessionDistance-${id}" step="0.1" placeholder="Distance" oninput="updateTrainingStats()">
                    `;
                    fieldsGrid.appendChild(distanceField);
                }
            } else {
                // Remove distance field if it exists
                if (existingDistanceField) {
                    existingDistanceField.parentElement.remove();
                }
            }
            
            updateTrainingStats();
        }
        
        function updateTrainingStats() {
            updateConsistencyTracker();
            updatePointsDisplay();
        }
        
        function getAllTrainingSessions() {
            const sessions = [];
            
            for (let i = 1; i <= trainingSessionCounter; i++) {
                const sessionDiv = document.getElementById(`training-session-${i}`);
                if (!sessionDiv) continue;
                
                const type = document.getElementById(`sessionType-${i}`)?.value || 'gym';
                const duration = parseInt(document.getElementById(`sessionDuration-${i}`)?.value) || 0;
                const intensity = parseInt(document.getElementById(`sessionIntensity-${i}`)?.value) || 0;
                const distance = type === 'run' ? parseFloat(document.getElementById(`sessionDistance-${i}`)?.value) || 0 : 0;
                
                sessions.push({
                    id: i,
                    type,
                    duration,
                    intensity,
                    distance,
                    completed: duration > 0 || (type === 'run' && distance > 0)
                });
            }
            
            return sessions;
        }
        
        // ==================== BASIC FUNCTIONS ====================
        function displayCurrentDate() {
            const today = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('currentDate').textContent = today.toLocaleDateString('en-US', options);
            clearOldData();
        }
        
        function clearOldData() {
            const today = new Date().toISOString().split('T')[0];
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            
            if (allData[today]) return;
            
            // Clear inputs
            ['stretching', 'steps', 'sleepHours', 'sleepMinutes', 'water', 'screenTime', 'pages', 
             'sleepQuality', 'remHours', 'remMinutes', 'deepHours', 'deepMinutes', 
             'lightHours', 'lightMinutes', 'pushUps', 'pullUps'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.value = '';
            });
            
            // Clear training sessions
            const container = document.getElementById('trainingSessionsContainer');
            container.innerHTML = '';
            trainingSessionCounter = 0;
            addTrainingSession();
            
            // Clear checkboxes
            ['coldShower', 'lust', 'napped', 'healthyEating', 'makeBed'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.checked = false;
            });
            
            // Clear hygiene radios
            document.querySelectorAll('input[name="hygiene"]').forEach(radio => {
                radio.checked = false;
            });
            
            updateCheckboxStyles();
            updateConsistencyTracker();
            updateSleepAnalysis();
            updateBodyweightGoals();
        }
        
        function displayDailyQuote() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
            const quoteIndex = dayOfYear % quotes.length;
            document.getElementById('dailyQuote').textContent = `"${quotes[quoteIndex].text}"`;
            document.getElementById('quoteAuthor').textContent = `‚Äî ${quotes[quoteIndex].author}`;
        }
        
        function toggleTrainingDetails() {
            const content = document.getElementById('trainingContent');
            const toggle = document.querySelector('.training-toggle');
            const isCollapsed = content.classList.contains('collapsed');
            
            if (isCollapsed) {
                content.classList.remove('collapsed');
                toggle.classList.remove('collapsed');
            } else {
                content.classList.add('collapsed');
                toggle.classList.add('collapsed');
            }
        }
        
        function updateCheckboxStyles() {
            const coldShowerGroup = document.getElementById('coldShowerGroup');
            const lustGroup = document.getElementById('lustGroup');
            const coldShowerChecked = document.getElementById('coldShower').checked;
            const lustChecked = document.getElementById('lust').checked;
            
            coldShowerGroup.classList.toggle('cold-shower-checked', coldShowerChecked);
            lustGroup.classList.toggle('lust-checked', lustChecked);
            updateConsistencyTracker();
        }
        
        function updateBodyweightGoals() {
            const pushUps = parseInt(document.getElementById('pushUps').value) || 0;
            const pullUps = parseInt(document.getElementById('pullUps').value) || 0;
            
            document.getElementById('pushUpsGoal').textContent = `${pushUps}/${goals.pushUps}`;
            document.getElementById('pullUpsGoal').textContent = `${pullUps}/${goals.pullUps}`;
        }
        
        function toggleSick() {
            const isActive = sickRestDays.sick.active;
            sickRestDays.sick.active = !isActive;
            
            if (sickRestDays.sick.active) {
                sickRestDays.sick.history.push(new Date().toISOString().split('T')[0]);
            }
            
            localStorage.setItem('sickRestDays', JSON.stringify(sickRestDays));
            updateSickRestDisplay();
            updateConsistencyTracker();
            updatePointsDisplay();
            updateStreakTracker();
        }
        
        function toggleRest() {
            const isActive = sickRestDays.rest.active;
            sickRestDays.rest.active = !isActive;
            
            if (sickRestDays.rest.active) {
                sickRestDays.rest.history.push(new Date().toISOString().split('T')[0]);
            }
            
            localStorage.setItem('sickRestDays', JSON.stringify(sickRestDays));
            updateSickRestDisplay();
            updateConsistencyTracker();
            updatePointsDisplay();
            updateStreakTracker();
        }
        
        function updateSickRestDisplay() {
            const sickToggle = document.getElementById('sickToggle');
            const sickIndicator = document.getElementById('sickIndicator');
            const sickElement = document.querySelector('.sick-toggle');
            
            const restToggle = document.getElementById('restToggle');
            const restIndicator = document.getElementById('restIndicator');
            const restElement = document.querySelector('.rest-toggle');
            
            // Update sick toggle
            sickToggle.checked = sickRestDays.sick.active;
            sickIndicator.textContent = sickRestDays.sick.active ? 'ACTIVE' : 'OFF';
            sickElement.classList.toggle('active', sickRestDays.sick.active);
            
            // Update rest toggle
            restToggle.checked = sickRestDays.rest.active;
            restIndicator.textContent = sickRestDays.rest.active ? 'ACTIVE' : 'OFF';
            restElement.classList.toggle('active', sickRestDays.rest.active);
        }
        
        function isGoalPaused(goalKey) {
            if (sickRestDays.sick.active) {
                return ['steps', 'pushUps', 'pullUps', 'training'].includes(goalKey);
            }
            
            if (sickRestDays.rest.active) {
                return goalKey === 'training';
            }
            
            return false;
        }
        
        // ==================== INPUT DATA FUNCTIONS ====================
        function getCurrentInputs() {
            // Sleep calculations
            const sleepHours = parseFloat(document.getElementById('sleepHours').value) || 0;
            const sleepMinutes = parseFloat(document.getElementById('sleepMinutes').value) || 0;
            const totalSleepHours = sleepHours + (sleepMinutes / 60);
            
            const remHours = parseFloat(document.getElementById('remHours').value) || 0;
            const remMinutes = parseFloat(document.getElementById('remMinutes').value) || 0;
            const totalRemMinutes = (remHours * 60) + remMinutes;
            
            const deepHours = parseFloat(document.getElementById('deepHours').value) || 0;
            const deepMinutes = parseFloat(document.getElementById('deepMinutes').value) || 0;
            const totalDeepMinutes = (deepHours * 60) + deepMinutes;
            
            const lightHours = parseFloat(document.getElementById('lightHours').value) || 0;
            const lightMinutes = parseFloat(document.getElementById('lightMinutes').value) || 0;
            const totalLightMinutes = (lightHours * 60) + lightMinutes;
            
            // Bodyweight goals
            const pushUps = parseInt(document.getElementById('pushUps').value) || 0;
            const pullUps = parseInt(document.getElementById('pullUps').value) || 0;
            
            // Get hygiene value
            let hygiene = 0;
            const hygieneRadio = document.querySelector('input[name="hygiene"]:checked');
            if (hygieneRadio) {
                hygiene = parseInt(hygieneRadio.value) || 0;
            }
            
            // Get all training sessions
            const trainingSessions = getAllTrainingSessions();
            const completedTrainings = trainingSessions.filter(s => s.completed).length;
            
            return {
                // Basic inputs
                stretching: parseInt(document.getElementById('stretching').value) || 0,
                steps: parseInt(document.getElementById('steps').value) || 0,
                sleep: totalSleepHours,
                sleepHours: sleepHours,
                sleepMinutes: sleepMinutes,
                sleepQuality: parseInt(document.getElementById('sleepQuality').value) || 0,
                remSleep: totalRemMinutes,
                remHours: remHours,
                remMinutes: remMinutes,
                deepSleep: totalDeepMinutes,
                deepHours: deepHours,
                deepMinutes: deepMinutes,
                lightSleep: totalLightMinutes,
                lightHours: lightHours,
                lightMinutes: lightMinutes,
                napped: document.getElementById('napped').checked,
                water: parseFloat(document.getElementById('water').value) || 0,
                screenTime: parseFloat(document.getElementById('screenTime').value) || 0,
                pages: parseInt(document.getElementById('pages').value) || 0,
                coldShower: document.getElementById('coldShower').checked,
                lust: document.getElementById('lust').checked,
                
                // New goals
                healthyEating: document.getElementById('healthyEating').checked,
                makeBed: document.getElementById('makeBed').checked,
                hygiene: hygiene,
                
                // Bodyweight goals
                pushUps: pushUps,
                pullUps: pullUps,
                
                // Training sessions
                trainingSessions: trainingSessions,
                completedTrainings: completedTrainings,
                totalTrainings: trainingSessions.length
            };
        }
        
        // ==================== CONSISTENCY TRACKER ====================
        function updateConsistencyTracker() {
            const tracker = document.getElementById('consistencyTracker');
            const currentData = getCurrentInputs();
            
            let html = '';
            
            // Regular metrics
            Object.keys(goals).forEach(key => {
                const isPaused = isGoalPaused(key);
                let current, goal, isGood;
                
                if (key === 'training') {
                    current = currentData.completedTrainings;
                    goal = goals.training;
                    isGood = current >= goal || isPaused;
                } else if (key === 'pushUps' || key === 'pullUps') {
                    current = parseInt(currentData[key]) || 0;
                    goal = goals[key];
                    isGood = current >= goal || isPaused;
                } else if (key === 'healthyEating' || key === 'makeBed') {
                    current = currentData[key] ? 1 : 0;
                    goal = goals[key];
                    isGood = current >= goal;
                } else if (key === 'hygiene') {
                    current = currentData[key] || 0;
                    goal = goals[key];
                    isGood = current >= goal;
                } else {
                    current = parseFloat(currentData[key]) || 0;
                    goal = goals[key];
                    isGood = key === 'screenTime' ? current <= goal : current >= goal;
                }
                
                const status = isGood ? 'good' : 'bad';
                const icon = isGood ? '‚úì' : '‚úó';
                
                let displayName = key.charAt(0).toUpperCase() + key.slice(1);
                if (key === 'screenTime') displayName = 'Screen Time';
                if (key === 'pushUps') displayName = 'Push-ups';
                if (key === 'pullUps') displayName = 'Pull-ups';
                if (key === 'healthyEating') displayName = 'Healthy Eating';
                if (key === 'makeBed') displayName = 'Make Bed';
                
                const pausedText = isPaused ? ' (Paused)' : '';
                
                html += `
                    <div class="consistency-item">
                        <span>${displayName}${pausedText}</span>
                        <div class="consistency-status status-${status}">${icon}</div>
                    </div>
                `;
            });
            
            // Cold shower
            html += `
                <div class="consistency-item">
                    <span>Cold Shower</span>
                    <div class="consistency-status status-${currentData.coldShower ? 'good' : 'bad'}">${currentData.coldShower ? '‚úì' : '‚úó'}</div>
                </div>
            `;
            
            // Lust control (inverted)
            html += `
                <div class="consistency-item">
                    <span>Lust Control</span>
                    <div class="consistency-status status-${currentData.lust ? 'bad' : 'good'}">${currentData.lust ? '‚úó' : '‚úì'}</div>
                </div>
            `;
            
            tracker.innerHTML = html;
        }
        
        // ==================== SLEEP ANALYSIS ====================
        function updateSleepAnalysis() {
            const currentData = getCurrentInputs();
            const sleepAnalysis = document.getElementById('sleepAnalysis');
            
            let html = '';
            
            // Sleep Score
            let sleepEmoji = 'üò¥';
            let sleepColor = '#667eea';
            if (currentData.sleepQuality >= 75) {
                sleepEmoji = 'üòä';
                sleepColor = '#4CAF50';
            } else if (currentData.sleepQuality >= 60) {
                sleepEmoji = 'üòê';
                sleepColor = '#FF9800';
            } else if (currentData.sleepQuality > 0) {
                sleepEmoji = 'üòü';
                sleepColor = '#f44336';
            }
            
            // Format sleep time
            let sleepTimeDisplay = '';
            if (currentData.sleepHours > 0 || currentData.sleepMinutes > 0) {
                if (currentData.sleepHours > 0 && currentData.sleepMinutes > 0) {
                    sleepTimeDisplay = `${currentData.sleepHours}h ${currentData.sleepMinutes}m`;
                } else if (currentData.sleepHours > 0) {
                    sleepTimeDisplay = `${currentData.sleepHours}h`;
                } else {
                    sleepTimeDisplay = `${currentData.sleepMinutes}m`;
                }
            }
            
            html += `
                <div class="sleep-score" style="color: ${sleepColor}">
                    ${currentData.sleepQuality > 0 ? currentData.sleepQuality : '--'}/100 ${sleepEmoji}
                </div>
                <div style="text-align: center; color: #666; margin-bottom: 15px;">
                    ${sleepTimeDisplay || 'No sleep data'}
                    ${currentData.napped ? ' + Nap üí§' : ''}
                </div>
            `;
            
            // Sleep stages
            const totalMinutes = currentData.remSleep + currentData.deepSleep + currentData.lightSleep;
            if (totalMinutes > 0) {
                const remPercent = Math.round((currentData.remSleep/totalMinutes)*100);
                const deepPercent = Math.round((currentData.deepSleep/totalMinutes)*100);
                const lightPercent = Math.round((currentData.lightSleep/totalMinutes)*100);
                
                const formatTime = (totalMinutes) => {
                    const hours = Math.floor(totalMinutes / 60);
                    const minutes = totalMinutes % 60;
                    if (hours > 0 && minutes > 0) return `${hours}h ${minutes}m`;
                    if (hours > 0) return `${hours}h`;
                    return `${minutes}m`;
                };
                
                html += `
                    <div class="sleep-breakdown">
                        <div class="sleep-metric" style="border-left: 4px solid #667eea;">
                            <div class="sleep-metric-label">REM Sleep</div>
                            <div class="sleep-metric-value">${formatTime(currentData.remSleep)}</div>
                            <div style="font-size: 0.7rem; color: #888;">${remPercent}%</div>
                            <div class="sleep-stage-bar">
                                <div class="sleep-stage-fill" style="width: ${remPercent}%; background: #667eea;"></div>
                            </div>
                        </div>
                        <div class="sleep-metric" style="border-left: 4px solid #4CAF50;">
                            <div class="sleep-metric-label">Deep Sleep</div>
                            <div class="sleep-metric-value">${formatTime(currentData.deepSleep)}</div>
                            <div style="font-size: 0.7rem; color: #888;">${deepPercent}%</div>
                            <div class="sleep-stage-bar">
                                <div class="sleep-stage-fill" style="width: ${deepPercent}%; background: #4CAF50;"></div>
                            </div>
                        </div>
                        <div class="sleep-metric" style="border-left: 4px solid #FF9800;">
                            <div class="sleep-metric-label">Light Sleep</div>
                            <div class="sleep-metric-value">${formatTime(currentData.lightSleep)}</div>
                            <div style="font-size: 0.7rem; color: #888;">${lightPercent}%</div>
                            <div class="sleep-stage-bar">
                                <div class="sleep-stage-fill" style="width: ${lightPercent}%; background: #FF9800;"></div>
                            </div>
                        </div>
                        <div class="sleep-metric" style="border-left: 4px solid #9C27B0;">
                            <div class="sleep-metric-label">Total Stages</div>
                            <div class="sleep-metric-value">${formatTime(totalMinutes)}</div>
                            <div style="font-size: 0.7rem; color: #888;">${Math.floor(totalMinutes/60)}h ${totalMinutes%60}m</div>
                            <div class="sleep-stage-bar">
                                <div class="sleep-stage-fill" style="width: 100%; background: #9C27B0;"></div>
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee; text-align: center; font-size: 0.9rem; color: #666;">
                        <div>üí° Ideal: 1.5-2h REM, 1-1.5h Deep sleep</div>
                        <div style="font-size: 0.8rem; color: #888; margin-top: 3px;">(20-25% each of total sleep)</div>
                    </div>
                `;
            } else if (currentData.sleep > 0) {
                html += `<div style="text-align: center; color: #888; padding: 20px;">Enter sleep stage details for breakdown</div>`;
            } else {
                html += `<div style="text-align: center; color: #888; padding: 20px;">Enter sleep data to see analysis</div>`;
            }
            
            sleepAnalysis.innerHTML = html;
        }
        
        // ==================== SAVE & LOAD DATA ====================
        function saveData() {
            const today = new Date().toISOString().split('T')[0];
            const data = getCurrentInputs();
            
            let allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            allData[today] = data;
            localStorage.setItem('lifeTrackerData', JSON.stringify(allData));
            
            // Save sick/rest status
            sickRestDays.sick.active = false;
            sickRestDays.rest.active = false;
            localStorage.setItem('sickRestDays', JSON.stringify(sickRestDays));
            
            // Save points
            const pointsData = calculateTodayPoints();
            let pointsHistory = JSON.parse(localStorage.getItem('lifeTrackerPoints')) || { total: 0, days: {} };
            if (!pointsHistory.days[today]) {
                pointsHistory.total += pointsData.total;
                pointsHistory.days[today] = { points: pointsData.total, breakdown: pointsData.breakdown };
                localStorage.setItem('lifeTrackerPoints', JSON.stringify(pointsHistory));
            }
            
            // Update inactivity tracker
            updateInactivityTracker(today, data);
            
            // Success message
            const btn = document.querySelector('.save-btn');
            btn.textContent = '‚úÖ Saved Successfully!';
            btn.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
            setTimeout(() => {
                btn.textContent = 'üíæ Save Today\'s Data';
                btn.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
            }, 2000);
            
            updateChart();
            updateStreakTracker();
            updateTotalStats();
            updatePointsDisplay();
            updateHabitConsistency();
            updateSickRestDisplay();
        }
        
        function loadTodaysData() {
            const today = new Date().toISOString().split('T')[0];
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const todaysData = allData[today];
            
            if (!todaysData) return;
            
            // Load basic fields
            Object.keys(todaysData).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    if (element.type === 'checkbox') {
                        element.checked = todaysData[key];
                    } else if (element.type === 'radio') {
                        const value = todaysData[key];
                        const radio = document.querySelector(`input[name="${element.name}"][value="${value}"]`);
                        if (radio) radio.checked = true;
                    } else {
                        element.value = todaysData[key] || '';
                    }
                }
            });
            
            // Load training sessions
            if (todaysData.trainingSessions && todaysData.trainingSessions.length > 0) {
                const container = document.getElementById('trainingSessionsContainer');
                container.innerHTML = '';
                trainingSessionCounter = 0;
                
                todaysData.trainingSessions.forEach(session => {
                    trainingSessionCounter++;
                    addTrainingSession(session.type);
                    
                    // Fill training session data
                    setTimeout(() => {
                        const typeSelect = document.getElementById(`sessionType-${trainingSessionCounter}`);
                        if (typeSelect) typeSelect.value = session.type;
                        
                        const durationInput = document.getElementById(`sessionDuration-${trainingSessionCounter}`);
                        if (durationInput) durationInput.value = session.duration || '';
                        
                        const intensityInput = document.getElementById(`sessionIntensity-${trainingSessionCounter}`);
                        if (intensityInput) intensityInput.value = session.intensity || '';
                        
                        if (session.type === 'run') {
                            const distanceInput = document.getElementById(`sessionDistance-${trainingSessionCounter}`);
                            if (distanceInput) distanceInput.value = session.distance || '';
                        }
                    }, 100);
                });
            } else {
                const container = document.getElementById('trainingSessionsContainer');
                if (container.children.length === 0) {
                    addTrainingSession();
                }
            }
            
            updateCheckboxStyles();
            updateConsistencyTracker();
            updateSleepAnalysis();
            updateBodyweightGoals();
        }
        
        // ==================== INACTIVITY TRACKER ====================
        function updateInactivityTracker(today, data) {
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const dates = Object.keys(allData).sort();
            
            // Add new goals to inactivity tracker
            const allGoals = { ...goals, coldShower: true, lustControl: true };
            
            Object.keys(allGoals).forEach(goalKey => {
                if (!inactivityTracker[goalKey]) {
                    inactivityTracker[goalKey] = { lastCompleted: null, consecutiveMissed: 0 };
                }
                
                const tracker = inactivityTracker[goalKey];
                const goalMet = isGoalMetForDay(data, goalKey);
                
                if (goalMet) {
                    tracker.lastCompleted = today;
                    tracker.consecutiveMissed = 0;
                } else {
                    tracker.consecutiveMissed++;
                }
            });
            
            localStorage.setItem('inactivityTracker', JSON.stringify(inactivityTracker));
        }
        
        function isGoalMetForDay(data, goalKey) {
            if (goalKey === 'coldShower') return data.coldShower === true;
            if (goalKey === 'lustControl') return data.lust !== true;
            if (goalKey === 'training') {
                return data.completedTrainings >= goals.training;
            }
            if (goalKey === 'healthyEating' || goalKey === 'makeBed') {
                return data[goalKey] === true;
            }
            if (goalKey === 'hygiene') {
                const value = data[goalKey] || 0;
                return value >= goals[goalKey];
            }
            if (goalKey === 'pushUps' || goalKey === 'pullUps') {
                const value = parseInt(data[goalKey]) || 0;
                const goal = goals[goalKey];
                return value >= goal;
            }
            
            const value = parseFloat(data[goalKey]) || 0;
            const goal = goals[goalKey];
            return goalKey === 'screenTime' ? value <= goal : value >= goal;
        }
        
        // ==================== POINTS SYSTEM ====================
        function calculateTodayPoints() {
            const currentData = getCurrentInputs();
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const dates = Object.keys(allData).sort();
            const streaks = calculateStreaksWithPause(dates, allData);
            
            let totalPoints = 0;
            let pointsBreakdown = [];
            let completedGoals = 0;
            const totalGoals = Object.keys(goals).length + 2; // +2 for cold shower and lust control
            
            // Calculate points for each goal
            Object.keys(goals).forEach(goalKey => {
                const isPaused = isGoalPaused(goalKey);
                let points = 0;
                let multiplier = 1;
                let description = '';
                let emoji = '';
                
                // Streak multiplier
                const streak = streaks[goalKey] || 0;
                for (const [days, mult] of Object.entries(pointsConfig.streakMultipliers).sort((a, b) => b[0] - a[0])) {
                    if (streak >= parseInt(days)) {
                        multiplier = mult;
                        break;
                    }
                }
                
                if (goalKey === 'training') {
                    const goalMet = currentData.completedTrainings >= goals.training;
                    
                    if (goalMet && !isPaused) {
                        points = pointsConfig.training * multiplier;
                        description = `Training (${currentData.completedTrainings} sessions)`;
                        emoji = 'üí™';
                        completedGoals++;
                        
                        // Training bonuses
                        let bonusPoints = 0;
                        currentData.trainingSessions.forEach((session, index) => {
                            if (session.completed) {
                                // Duration bonus
                                if (session.duration > 75) {
                                    bonusPoints += pointsConfig.durationBonus;
                                    description += ` +${pointsConfig.durationBonus}dur`;
                                }
                                
                                // Intensity bonus
                                if (session.intensity > 6) {
                                    bonusPoints += pointsConfig.intensityBonus;
                                    description += ` +${pointsConfig.intensityBonus}int`;
                                }
                                
                                // Extra training bonus
                                if (index > 0) {
                                    bonusPoints += pointsConfig.extraTrainingBonus;
                                    description += ` +${pointsConfig.extraTrainingBonus}extra`;
                                }
                            }
                        });
                        
                        points += bonusPoints;
                    } else if (!goalMet && !isPaused) {
                        points = pointsConfig.trainingDeduction;
                        description = `Training (Missed)`;
                        emoji = '‚ùå';
                    }
                } else if (goalKey === 'pushUps' || goalKey === 'pullUps') {
                    const current = parseInt(currentData[goalKey]) || 0;
                    const goal = goals[goalKey];
                    const goalMet = current >= goal;
                    
                    if (goalMet && !isPaused) {
                        points = pointsConfig[goalKey] * multiplier;
                        description = goalKey === 'pushUps' ? 'Push-ups' : 'Pull-ups';
                        emoji = goalKey === 'pushUps' ? 'üí™' : 'ü§∏';
                        completedGoals++;
                    } else if (!goalMet && !isPaused) {
                        points = pointsConfig[`${goalKey}Deduction`];
                        description = goalKey === 'pushUps' ? 'Push-ups (Missed)' : 'Pull-ups (Missed)';
                        emoji = '‚ùå';
                    }
                } else if (goalKey === 'healthyEating' || goalKey === 'makeBed') {
                    const goalMet = currentData[goalKey] === true;
                    
                    if (goalMet) {
                        points = pointsConfig[goalKey] * multiplier;
                        description = goalKey === 'healthyEating' ? 'Healthy Eating' : 'Make Bed';
                        emoji = goalKey === 'healthyEating' ? 'ü•ó' : 'üõèÔ∏è';
                        completedGoals++;
                    } else {
                        points = pointsConfig[`${goalKey}Deduction`];
                        description = goalKey === 'healthyEating' ? 'Healthy Eating (Missed)' : 'Make Bed (Missed)';
                        emoji = '‚ùå';
                    }
                } else if (goalKey === 'hygiene') {
                    const current = currentData[goalKey] || 0;
                    const goal = goals[goalKey];
                    
                    if (current >= goal) {
                        points = pointsConfig[goalKey] * multiplier;
                        description = `Hygiene (${current} times)`;
                        emoji = 'üßº';
                        completedGoals++;
                    } else if (current === 1) {
                        points = pointsConfig.hygienePartialDeduction;
                        description = `Hygiene (Only ${current} time)`;
                        emoji = '‚ö†Ô∏è';
                    } else if (current === 0) {
                        points = pointsConfig.hygieneDeduction;
                        description = `Hygiene (Missed)`;
                        emoji = '‚ùå';
                    }
                } else if (goalKey === 'sleep') {
                    const sleepQuality = currentData.sleepQuality;
                    const sleepDuration = currentData.sleep;
                    
                    let sleepPoints = 0;
                    description = 'Sleep';
                    emoji = 'üò¥';
                    
                    if (sleepQuality > 75 && sleepDuration >= 8.0 && sleepDuration <= 9.5) {
                        sleepPoints = pointsConfig.sleepQualityBonus * multiplier;
                        description += ' (Quality & Duration)';
                        completedGoals++;
                    } else if (sleepQuality <= 60) {
                        sleepPoints = pointsConfig.sleepQualityDeduction;
                        description += ' (Low Quality)';
                    } else if (sleepDuration < 7) {
                        sleepPoints = pointsConfig.sleepDurationDeduction;
                        description += ' (Short Sleep)';
                    }
                    
                    points = sleepPoints;
                    
                } else {
                    const current = parseFloat(currentData[goalKey]) || 0;
                    const goal = goals[goalKey];
                    const goalMet = goalKey === 'screenTime' ? current <= goal : current >= goal;
                    
                    if (goalMet) {
                        points = pointsConfig[goalKey] * multiplier;
                        description = goalKey.charAt(0).toUpperCase() + goalKey.slice(1);
                        if (goalKey === 'screenTime') description = 'Screen Time';
                        emoji = getEmojiForActivity(goalKey);
                        completedGoals++;
                        
                        // Steps bonus
                        if (goalKey === 'steps' && current > goal) {
                            const extraSteps = current - goal;
                            const extraMultipliers = Math.min(
                                Math.floor(extraSteps / 1500),
                                pointsConfig.maxStepsMultipliers
                            );
                            const bonus = Math.round(pointsConfig.steps * pointsConfig.stepsMultiplierPer1500 * extraMultipliers);
                            if (bonus > 0) {
                                points += bonus;
                                description += ` +${bonus} bonus`;
                            }
                        }
                    } else {
                        if (!isPaused) {
                            points = pointsConfig[`${goalKey}Deduction`];
                            description = `${goalKey.charAt(0).toUpperCase() + goalKey.slice(1)} (Missed)`;
                            if (goalKey === 'screenTime') description = 'Screen Time (Exceeded)';
                            emoji = '‚ùå';
                        }
                    }
                }
                
                if (points !== 0) {
                    totalPoints += points;
                    const isNegative = points < 0;
                    pointsBreakdown.push({ 
                        emoji, 
                        description, 
                        points: Math.round(points), 
                        multiplier: multiplier > 1 && !isNegative ? `x${multiplier}` : '',
                        isNegative 
                    });
                }
            });
            
            // Cold shower points
            if (currentData.coldShower) {
                const streak = streaks.coldShower || 0;
                let multiplier = 1;
                for (const [days, mult] of Object.entries(pointsConfig.streakMultipliers).sort((a, b) => b[0] - a[0])) {
                    if (streak >= parseInt(days)) {
                        multiplier = mult;
                        break;
                    }
                }
                const points = pointsConfig.coldShower * multiplier;
                totalPoints += points;
                completedGoals++;
                pointsBreakdown.push({ emoji: 'üöø', description: 'Cold Shower', points: Math.round(points), multiplier: multiplier > 1 ? `x${multiplier}` : '', isNegative: false });
            }
            
            // Lust control points
            if (!currentData.lust) {
                const streak = streaks.lustControl || 0;
                let multiplier = 1;
                for (const [days, mult] of Object.entries(pointsConfig.streakMultipliers).sort((a, b) => b[0] - a[0])) {
                    if (streak >= parseInt(days)) {
                        multiplier = mult;
                        break;
                    }
                }
                const points = pointsConfig.lustControl * multiplier;
                totalPoints += points;
                completedGoals++;
                pointsBreakdown.push({ emoji: 'üö´', description: 'Lust Control', points: Math.round(points), multiplier: multiplier > 1 ? `x${multiplier}` : '', isNegative: false });
            } else {
                const deduction = pointsConfig.lustControl * -1;
                totalPoints += deduction;
                pointsBreakdown.push({ emoji: '‚ö†Ô∏è', description: 'Lust (Deduction)', points: deduction, multiplier: '', isNegative: true });
            }
            
            // Bodyweight both bonus
            const pushUpsMet = (currentData.pushUps >= goals.pushUps) && !isGoalPaused('pushUps');
            const pullUpsMet = (currentData.pullUps >= goals.pullUps) && !isGoalPaused('pullUps');
            if (pushUpsMet && pullUpsMet) {
                const basePushUpsPoints = pointsConfig.pushUps;
                const basePullUpsPoints = pointsConfig.pullUps;
                const bonus = Math.round((basePushUpsPoints + basePullUpsPoints) * (pointsConfig.bodyweightBothBonus - 1));
                
                totalPoints += bonus;
                pointsBreakdown.push({ emoji: 'üèÜ', description: 'Bodyweight Both Bonus', points: bonus, multiplier: `x${pointsConfig.bodyweightBothBonus}`, isNegative: false });
            }
            
            // Inactivity penalties
            Object.keys(inactivityTracker).forEach(goalKey => {
                const tracker = inactivityTracker[goalKey];
                if (tracker.consecutiveMissed >= 3 && !isGoalPaused(goalKey)) {
                    const penalty = pointsConfig.inactivityPenalty;
                    totalPoints += penalty;
                    pointsBreakdown.push({ 
                        emoji: '‚è∞', 
                        description: `${goalKey.charAt(0).toUpperCase() + goalKey.slice(1)} Inactivity`, 
                        points: penalty, 
                        multiplier: '', 
                        isNegative: true 
                    });
                }
            });
            
            // Weekly consistency bonus
            const allDates = Object.keys(allData).sort();
            if (allDates.length >= 7) {
                const last7Days = allDates.slice(-7);
                const perfectDays = last7Days.filter(date => {
                    const dayData = allData[date];
                    if (!dayData) return false;
                    
                    let completed = 0;
                    Object.keys(goals).forEach(key => {
                        if (isGoalMetForDay(dayData, key)) completed++;
                    });
                    
                    if (dayData.coldShower) completed++;
                    if (!dayData.lust) completed++;
                    
                    return completed >= Object.keys(goals).length + 1;
                });
                
                if (perfectDays.length >= 7) {
                    totalPoints += pointsConfig.weeklyConsistencyBonus;
                    pointsBreakdown.push({ emoji: 'üìÖ', description: 'Weekly Consistency Bonus', points: pointsConfig.weeklyConsistencyBonus, multiplier: '7+ days', isNegative: false });
                }
            }
            
            // Daily completion bonus
            if (completedGoals === totalGoals) {
                totalPoints += pointsConfig.dailyCompletionBonus;
                pointsBreakdown.push({ emoji: 'üèÜ', description: 'All Goals Completed!', points: pointsConfig.dailyCompletionBonus, multiplier: 'BONUS', isNegative: false });
            }
            
            return { total: Math.round(totalPoints), breakdown: pointsBreakdown, completedGoals, totalGoals };
        }
        
        function getEmojiForActivity(activity) {
            const emojis = { 
                stretching: 'üßò', 
                steps: 'üëü', 
                sleep: 'üò¥', 
                water: 'üíß', 
                screenTime: 'üì±', 
                pages: 'üìö', 
                training: 'üí™',
                healthyEating: 'ü•ó',
                makeBed: 'üõèÔ∏è',
                hygiene: 'üßº'
            };
            return emojis[activity] || '‚≠ê';
        }
        
        function updatePointsDisplay() {
            const pointsData = calculateTodayPoints();
            const lifetimePoints = calculateLifetimePoints();
            
            document.getElementById('totalPoints').textContent = lifetimePoints.total;
            document.getElementById('todayPoints').textContent = `Today: ${pointsData.total} points`;
            
            let html = '';
            if (pointsData.breakdown.length > 0) {
                pointsData.breakdown.forEach(item => {
                    const pointsClass = item.isNegative ? 'points-negative' : 'points-value';
                    const pointsDisplay = item.points > 0 ? `+${item.points}` : item.points;
                    
                    html += `
                        <div class="points-item">
                            <div class="points-activity">
                                <span class="points-emoji">${item.emoji}</span>
                                <span>${item.description}</span>
                            </div>
                            <div>
                                <span class="${pointsClass}">${pointsDisplay}</span>
                                ${item.multiplier ? `<span class="points-multiplier">${item.multiplier}</span>` : ''}
                            </div>
                        </div>
                    `;
                });
            } else {
                html = `<div style="text-align: center; color: #888; padding: 10px;">Complete goals to earn points!</div>`;
            }
            
            document.getElementById('pointsBreakdown').innerHTML = html;
            updateLevelProgress(lifetimePoints.total);
        }
        
        function calculateLifetimePoints() {
            const storedPoints = JSON.parse(localStorage.getItem('lifeTrackerPoints')) || { total: 0 };
            const todayPoints = calculateTodayPoints();
            return { total: storedPoints.total + todayPoints.total };
        }
        
        function updateLevelProgress(totalPoints) {
            const levelProgress = document.getElementById('levelProgress');
            const levelText = document.getElementById('levelText');
            
            let level = 1;
            let pointsNeededForLevel = 100;
            let pointsForNextLevel = 100;
            let pointsInCurrentLevel = totalPoints;
            
            while (pointsInCurrentLevel >= pointsNeededForLevel) {
                pointsInCurrentLevel -= pointsNeededForLevel;
                level++;
                pointsNeededForLevel = level * 100;
                pointsForNextLevel = level * 100;
            }
            
            const progressPercent = (pointsInCurrentLevel / pointsForNextLevel) * 100;
            levelProgress.style.width = `${progressPercent}%`;
            levelText.textContent = `Level ${level} (${pointsInCurrentLevel}/${pointsForNextLevel})`;
        }
        
        // ==================== STREAK CALCULATION ====================
        function calculateStreaks(dates, allData) {
            const streaks = { 
                stretching: 0, steps: 0, sleep: 0, water: 0, screenTime: 0, pages: 0, 
                training: 0, coldShower: 0, lustControl: 0, pushUps: 0, pullUps: 0,
                healthyEating: 0, makeBed: 0, hygiene: 0
            };
            if (dates.length === 0) return streaks;
            
            const today = new Date();
            const todayStr = today.toISOString().split('T')[0];
            
            function goalMet(date, goalKey) {
                const dayData = allData[date];
                if (!dayData) return false;
                
                if (goalKey === 'coldShower') return dayData.coldShower === true;
                if (goalKey === 'lustControl') return dayData.lust !== true;
                if (goalKey === 'training') {
                    return dayData.completedTrainings >= goals.training;
                }
                if (goalKey === 'healthyEating' || goalKey === 'makeBed') {
                    return dayData[goalKey] === true;
                }
                if (goalKey === 'hygiene') {
                    const value = dayData[goalKey] || 0;
                    return value >= goals[goalKey];
                }
                if (goalKey === 'pushUps' || goalKey === 'pullUps') {
                    const value = parseInt(dayData[goalKey]) || 0;
                    const goal = goals[goalKey];
                    return value >= goal;
                }
                
                const value = parseFloat(dayData[goalKey]) || 0;
                const goal = goals[goalKey];
                return goalKey === 'screenTime' ? value <= goal : value >= goal;
            }
            
            Object.keys(streaks).forEach(goalKey => {
                let streak = 0;
                let checkingDate = new Date(today);
                
                for (let i = 0; i < 365; i++) {
                    const dateStr = checkingDate.toISOString().split('T')[0];
                    const dayData = allData[dateStr];
                    
                    if (dayData && goalMet(dateStr, goalKey)) {
                        streak++;
                    } else {
                        break;
                    }
                    
                    checkingDate.setDate(checkingDate.getDate() - 1);
                }
                
                streaks[goalKey] = streak;
            });
            
            return streaks;
        }
        
        function calculateStreaksWithPause(dates, allData) {
            const streaks = calculateStreaks(dates, allData);
            const today = new Date().toISOString().split('T')[0];
            
            if (sickRestDays.sick.active) {
                streaks.steps = Math.max(streaks.steps, 1);
                streaks.pushUps = Math.max(streaks.pushUps, 1);
                streaks.pullUps = Math.max(streaks.pullUps, 1);
                streaks.training = Math.max(streaks.training, 1);
            }
            
            if (sickRestDays.rest.active) {
                streaks.training = Math.max(streaks.training, 1);
            }
            
            return streaks;
        }
        
        function updateStreakTracker() {
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const dates = Object.keys(allData).sort();
            const streaks = calculateStreaksWithPause(dates, allData);
            
            let html = '';
            Object.keys(streaks).forEach(key => {
                const streak = streaks[key];
                let displayName = key.charAt(0).toUpperCase() + key.slice(1);
                if (key === 'screenTime') displayName = 'Screen Time';
                if (key === 'coldShower') displayName = 'Cold Shower';
                if (key === 'lustControl') displayName = 'Lust Control';
                if (key === 'pushUps') displayName = 'Push-ups';
                if (key === 'pullUps') displayName = 'Pull-ups';
                if (key === 'healthyEating') displayName = 'Healthy Eating';
                if (key === 'makeBed') displayName = 'Make Bed';
                if (key === 'hygiene') displayName = 'Hygiene';
                
                let streakColor = '#666';
                let flameIcon = '';
                let pausedIndicator = '';
                
                const isPaused = isGoalPaused(key);
                
                if (isPaused) {
                    pausedIndicator = ' ‚è∏Ô∏è';
                    streakColor = '#6c757d';
                } else if (streak >= 7) {
                    streakColor = '#4CAF50';
                    flameIcon = 'üî•';
                } else if (streak >= 3) {
                    streakColor = '#FF9800';
                    flameIcon = 'üî•';
                } else if (streak > 0) {
                    streakColor = '#667eea';
                    flameIcon = '‚ú®';
                }
                
                html += `
                    <div class="consistency-item">
                        <span>${displayName}</span>
                        <div style="color: ${streakColor}; font-weight: bold; font-size: 1.1rem;">
                            ${streak} day${streak !== 1 ? 's' : ''} ${flameIcon}${pausedIndicator}
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('streakTracker').innerHTML = html;
        }
        
        // ==================== HABIT CONSISTENCY ====================
        function calculateHabitConsistency() {
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const dates = Object.keys(allData).sort();
            const totalDays = dates.length;
            
            const consistency = {};
            Object.keys(goals).forEach(goalKey => {
                let completedDays = 0;
                
                dates.forEach(date => {
                    const dayData = allData[date];
                    if (dayData && isGoalMetForDay(dayData, goalKey)) {
                        completedDays++;
                    }
                });
                
                consistency[goalKey] = totalDays > 0 ? Math.round((completedDays / totalDays) * 100) : 0;
            });
            
            // Overall consistency
            const values = Object.values(consistency);
            const overall = values.length > 0 ? Math.round(values.reduce((a, b) => a + b, 0) / values.length) : 0;
            
            return { overall, habits: consistency };
        }
        
        function updateHabitConsistency() {
            const consistency = calculateHabitConsistency();
            const habitConsistencyElement = document.getElementById('habitConsistency');
            
            document.getElementById('overallConsistency').textContent = `${consistency.overall}%`;
            
            let html = '';
            Object.keys(consistency.habits).forEach(key => {
                const value = consistency.habits[key];
                let displayName = key.charAt(0).toUpperCase() + key.slice(1);
                if (key === 'screenTime') displayName = 'Screen Time';
                if (key === 'pushUps') displayName = 'Push-ups';
                if (key === 'pullUps') displayName = 'Pull-ups';
                if (key === 'healthyEating') displayName = 'Healthy Eating';
                if (key === 'makeBed') displayName = 'Make Bed';
                if (key === 'hygiene') displayName = 'Hygiene';
                
                html += `
                    <div class="consistency-item">
                        <span>${displayName}</span>
                        <div style="font-weight: bold; color: ${getConsistencyColor(value)};">
                            ${value}%
                        </div>
                    </div>
                `;
            });
            
            habitConsistencyElement.innerHTML = html;
        }
        
        function getConsistencyColor(value) {
            if (value >= 90) return '#4CAF50';
            if (value >= 70) return '#FF9800';
            if (value >= 50) return '#FFC107';
            return '#f44336';
        }
        
        // ==================== TOTAL STATISTICS ====================
        function updateTotalStats() {
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const totalStatsElement = document.getElementById('totalStats');
            
            const totals = { 
                stretching: 0, steps: 0, sleep: 0, water: 0, screenTime: 0, pages: 0, 
                gymSessions: 0, runs: 0, totalRunDistance: 0, coldShowers: 0, naps: 0,
                pushUps: 0, pullUps: 0, healthyEatingDays: 0, makeBedDays: 0, hygieneScore: 0,
                totalTrainings: 0
            };
            let totalDays = 0;
            
            Object.keys(allData).forEach(date => {
                const dayData = allData[date];
                totalDays++;
                
                totals.stretching += parseFloat(dayData.stretching) || 0;
                totals.steps += parseFloat(dayData.steps) || 0;
                totals.sleep += parseFloat(dayData.sleep) || 0;
                totals.water += parseFloat(dayData.water) || 0;
                totals.screenTime += parseFloat(dayData.screenTime) || 0;
                totals.pages += parseFloat(dayData.pages) || 0;
                totals.pushUps += parseInt(dayData.pushUps) || 0;
                totals.pullUps += parseInt(dayData.pullUps) || 0;
                totals.healthyEatingDays += dayData.healthyEating ? 1 : 0;
                totals.makeBedDays += dayData.makeBed ? 1 : 0;
                totals.hygieneScore += parseInt(dayData.hygiene) || 0;
                totals.totalTrainings += dayData.totalTrainings || 0;
                
                // Count training sessions by type
                if (dayData.trainingSessions) {
                    dayData.trainingSessions.forEach(session => {
                        if (session.type === 'gym') totals.gymSessions++;
                        if (session.type === 'run') {
                            totals.runs++;
                            totals.totalRunDistance += parseFloat(session.distance) || 0;
                        }
                    });
                }
                
                if (dayData.coldShower === true) totals.coldShowers++;
                if (dayData.napped === true) totals.naps++;
            });
            
            const formatNumber = (num) => {
                if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
                if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
                return Math.round(num * 10) / 10;
            };
            
            totalStatsElement.innerHTML = `
                <div class="consistency-item"><span>üßò Total Stretching</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.stretching)}</div></div>
                <div class="consistency-item"><span>üëü Total Steps</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.steps)}</div></div>
                <div class="consistency-item"><span>üò¥ Total Sleep</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.sleep)}h</div></div>
                <div class="consistency-item"><span>üíß Total Water</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.water)}L</div></div>
                <div class="consistency-item"><span>üì± Total Screen Time</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.screenTime)}h</div></div>
                <div class="consistency-item"><span>üìö Total Pages</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.pages)}</div></div>
                <div class="consistency-item"><span>ü•ó Healthy Eating Days</span><div style="font-weight: bold; color: #4CAF50;">${totals.healthyEatingDays}</div></div>
                <div class="consistency-item"><span>üõèÔ∏è Make Bed Days</span><div style="font-weight: bold; color: #FF9800;">${totals.makeBedDays}</div></div>
                <div class="consistency-item"><span>üßº Hygiene Score</span><div style="font-weight: bold; color: #00BCD4;">${totals.hygieneScore}</div></div>
                <div class="consistency-item"><span>üí™ Total Push-ups</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.pushUps)}</div></div>
                <div class="consistency-item"><span>ü§∏ Total Pull-ups</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.pullUps)}</div></div>
                <div class="consistency-item"><span>üèãÔ∏è Gym Sessions</span><div style="font-weight: bold; color: #667eea;">${totals.gymSessions}</div></div>
                <div class="consistency-item"><span>üèÉ Total Runs</span><div style="font-weight: bold; color: #667eea;">${totals.runs}</div></div>
                <div class="consistency-item"><span>üìè Total Distance</span><div style="font-weight: bold; color: #667eea;">${formatNumber(totals.totalRunDistance)}km</div></div>
                <div class="consistency-item"><span>üí™ Total Training Sessions</span><div style="font-weight: bold; color: #667eea;">${totals.totalTrainings}</div></div>
                <div class="consistency-item"><span>üöø Cold Showers</span><div style="font-weight: bold; color: #4CAF50;">${totals.coldShowers}</div></div>
                <div class="consistency-item"><span>üò¥ Naps Taken</span><div style="font-weight: bold; color: #667eea;">${totals.naps}</div></div>
                <div class="consistency-item"><span>üìÖ Days Tracked</span><div style="font-weight: bold; color: #764ba2;">${totalDays}</div></div>
            `;
        }
        
        // ==================== CHART FUNCTIONS ====================
        function showChart(type) {
            currentView = type;
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateChart();
        }
        
        function changePeriod(period) {
            currentPeriod = period;
            document.querySelectorAll('.period-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateChart();
        }
        
        function initializeChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            currentChart = new Chart(ctx, {
                type: 'line',
                data: { labels: [], datasets: [] },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true } },
                    plugins: { legend: { display: true, position: 'top' } }
                }
            });
            updateChart();
        }
        
        function updateChart() {
            const allData = JSON.parse(localStorage.getItem('lifeTrackerData')) || {};
            const dates = Object.keys(allData).sort();
            const chartData = getChartData(dates, allData);
            
            if (currentChart) {
                currentChart.data = chartData;
                currentChart.update();
            }
            
            const titles = {
                stretching: 'Stretching Sessions',
                steps: 'Steps Taken',
                sleep: 'Sleep Hours',
                water: 'Water Intake (Liters)',
                screenTime: 'Screen Time (Hours)',
                pages: 'Pages Read',
                training: 'Training Sessions',
                healthyEating: 'Healthy Eating Days',
                makeBed: 'Make Bed Days',
                hygiene: 'Hygiene Score',
                consistency: 'Overall Consistency'
            };
            
            const periodText = currentPeriod === 'daily' ? 'Last 7 Days' : 
                              currentPeriod === 'weekly' ? 'Last 4 Weeks' : 'Last 6 Months';
            
            document.getElementById('chartTitle').textContent = `${titles[currentView] || currentView} - ${periodText}`;
        }
        
        function getChartData(dates, allData) {
            const now = new Date();
            let filteredDates = [];
            
            if (currentPeriod === 'daily') {
                for (let i = 6; i >= 0; i--) {
                    const date = new Date(now);
                    date.setDate(date.getDate() - i);
                    filteredDates.push(date.toISOString().split('T')[0]);
                }
            } else if (currentPeriod === 'weekly') {
                for (let i = 3; i >= 0; i--) {
                    const date = new Date(now);
                    date.setDate(date.getDate() - (i * 7));
                    filteredDates.push(`Week of ${date.toLocaleDateString()}`);
                }
            } else {
                for (let i = 5; i >= 0; i--) {
                    const date = new Date(now);
                    date.setMonth(date.getMonth() - i);
                    filteredDates.push(date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' }));
                }
            }
            
            if (currentView === 'consistency') {
                return getConsistencyChartData(filteredDates, allData);
            } else {
                return getSingleMetricChartData(filteredDates, allData, currentView);
            }
        }
        
        function getSingleMetricChartData(labels, allData, metric) {
            const data = labels.map(label => {
                if (currentPeriod === 'daily') {
                    const dayData = allData[label];
                    if (metric === 'training') {
                        return dayData ? (dayData.completedTrainings || 0) : 0;
                    } else if (metric === 'healthyEating' || metric === 'makeBed') {
                        return dayData ? (dayData[metric] ? 1 : 0) : 0;
                    } else if (metric === 'hygiene') {
                        return dayData ? (dayData[metric] || 0) : 0;
                    }
                    return dayData ? (parseFloat(dayData[metric]) || 0) : 0;
                }
                return 0;
            });
            
            const colors = {
                stretching: '#667eea',
                steps: '#4CAF50',
                sleep: '#2196F3',
                water: '#00BCD4',
                screenTime: '#FF9800',
                pages: '#9C27B0',
                training: '#f44336',
                healthyEating: '#8BC34A',
                makeBed: '#FFC107',
                hygiene: '#00BCD4'
            };
            
            return {
                labels,
                datasets: [{
                    label: metric.charAt(0).toUpperCase() + metric.slice(1),
                    data,
                    borderColor: colors[metric] || '#667eea',
                    backgroundColor: (colors[metric] || '#667eea') + '20',
                    tension: 0.4,
                    fill: true
                }]
            };
        }
        
        function getConsistencyChartData(labels, allData) {
            const consistencyData = labels.map(label => {
                if (currentPeriod === 'daily') {
                    const dayData = allData[label];
                    if (dayData) {
                        let completed = 0;
                        let total = Object.keys(goals).length + 2;
                        
                        Object.keys(goals).forEach(key => {
                            if (isGoalMetForDay(dayData, key)) completed++;
                        });
                        
                        if (dayData.coldShower) completed++;
                        if (!dayData.lust) completed++;
                        
                        return Math.round((completed / total) * 100);
                    }
                }
                return 0;
            });
            
            return {
                labels,
                datasets: [{
                    label: 'Consistency %',
                    data: consistencyData,
                    borderColor: '#4CAF50',
                    backgroundColor: '#4CAF5020',
                    tension: 0.4,
                    fill: true
                }]
            };
        }
        
        // ==================== RESET FUNCTIONS ====================
        function showResetConfirm() {
            document.getElementById('resetConfirm').style.display = 'block';
        }
        
        function hideResetConfirm() {
            document.getElementById('resetConfirm').style.display = 'none';
        }
        
        function hardReset() {
            localStorage.removeItem('lifeTrackerData');
            localStorage.removeItem('sickRestDays');
            localStorage.removeItem('inactivityTracker');
            localStorage.removeItem('lifeTrackerPoints');
            
            // Clear all inputs
            document.querySelectorAll('input, select').forEach(el => {
                if (el.type === 'checkbox' || el.type === 'radio') {
                    el.checked = false;
                } else {
                    el.value = '';
                }
            });
            
            // Clear training sessions
            const container = document.getElementById('trainingSessionsContainer');
            container.innerHTML = '';
            trainingSessionCounter = 0;
            addTrainingSession();
            
            // Reset sick/rest
            sickRestDays = { sick: { active: false, history: [] }, rest: { active: false, history: [] } };
            localStorage.setItem('sickRestDays', JSON.stringify(sickRestDays));
            
            // Reset inactivity tracker
            inactivityTracker = {};
            localStorage.setItem('inactivityTracker', JSON.stringify(inactivityTracker));
            
            hideResetConfirm();
            
            // Update UI
            updateCheckboxStyles();
            updateConsistencyTracker();
            updateSleepAnalysis();
            updateBodyweightGoals();
            updateStreakTracker();
            updateTotalStats();
            updateSickRestDisplay();
            updatePointsDisplay();
            updateHabitConsistency();
            updateChart();
            
            // Success message
            const resetBtn = document.querySelector('.reset-btn');
            resetBtn.textContent = '‚úÖ All Data Cleared!';
            resetBtn.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
            setTimeout(() => {
                resetBtn.textContent = 'üóëÔ∏è Hard Reset All Data';
                resetBtn.style.background = 'linear-gradient(135deg, #f44336, #d32f2f)';
            }, 3000);
        }
    </script>
</body>
</html>
